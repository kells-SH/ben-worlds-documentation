<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>TypeScript Conventions and Best Practices for Horizon Worlds | MHCP Creator Documentation</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="TypeScript Conventions and Best Practices for Horizon Worlds" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Comprehensive guide to TypeScript conventions and best practices" />
<meta property="og:description" content="Comprehensive guide to TypeScript conventions and best practices" />
<link rel="canonical" href="http://localhost:4000/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/" />
<meta property="og:url" content="http://localhost:4000/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/" />
<meta property="og:site_name" content="MHCP Creator Documentation" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-08-06T12:50:38-07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="TypeScript Conventions and Best Practices for Horizon Worlds" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-08-06T12:50:38-07:00","datePublished":"2025-08-06T12:50:38-07:00","description":"Comprehensive guide to TypeScript conventions and best practices","headline":"TypeScript Conventions and Best Practices for Horizon Worlds","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/"},"url":"http://localhost:4000/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:image" content="images/MHCP_OG_image.jpg"/>
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
  <title>TypeScript Conventions and Best Practices for Horizon Worlds - MHCP Creator Made Docs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <!-- Add GitHub Markdown CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-light.min.css">
  <!-- Add Rouge syntax highlighting CSS for light and dark themes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rouge/4.1.3/themes/github.min.css" media="(prefers-color-scheme: light)">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rouge/4.1.3/themes/monokai.sublime.min.css" media="(prefers-color-scheme: dark)">
  <link rel="stylesheet" href="/ben-worlds-documentation/assets/css/styles.css?v=6a5371451db61c1504909c992e42bf7ab56c923b">
  <style>
    /* Dark mode fixes for markdown content */
    [data-theme="dark"] .markdown-body {
      color: #e6edf3;
      background-color: transparent;
    }
    
    [data-theme="dark"] .markdown-body h1,
    [data-theme="dark"] .markdown-body h2,
    [data-theme="dark"] .markdown-body h3,
    [data-theme="dark"] .markdown-body h4,
    [data-theme="dark"] .markdown-body h5,
    [data-theme="dark"] .markdown-body h6 {
      color: #e6edf3;
    }
    
    [data-theme="dark"] .markdown-body table {
      background-color: transparent;
      border-collapse: collapse;
      color: #e6edf3;
    }
    
    [data-theme="dark"] .markdown-body table th,
    [data-theme="dark"] .markdown-body table td {
      background-color: #0d1117 !important;
      border: 1px solid #30363d !important;
      color: #e6edf3 !important;
      padding: 6px 13px;
    }
    
    [data-theme="dark"] .markdown-body table th {
      background-color: #21262d !important;
      font-weight: 600;
      color: #f0f6fc !important;
    }
    
    [data-theme="dark"] .markdown-body table tbody tr:nth-child(odd) td {
      background-color: #0d1117 !important;
    }
    
    [data-theme="dark"] .markdown-body table tbody tr:nth-child(even) td {
      background-color: #161b22 !important;
    }
    
    [data-theme="dark"] .markdown-body table tbody tr:hover td {
      background-color: #1c2128 !important;
    }
    
    [data-theme="dark"] .markdown-body pre {
      background-color: #161b22;
      border: 1px solid #30363d;
    }
    
    [data-theme="dark"] .markdown-body code {
      background-color: rgba(110,118,129,0.4);
      color: #e6edf3;
    }
    
    [data-theme="dark"] .markdown-body pre code {
      background-color: transparent;
      color: #e6edf3;
    }
    
    [data-theme="dark"] .markdown-body blockquote {
      border-left: 0.25em solid #30363d;
      color: #8b949e;
    }
    
    [data-theme="dark"] .markdown-body a {
      color: #58a6ff;
    }
    
    [data-theme="dark"] .markdown-body a:hover {
      color: #79c0ff;
    }
    
    /* Enhanced syntax highlighting for dark mode */
    [data-theme="dark"] .markdown-body .highlight pre,
    [data-theme="dark"] .markdown-body pre {
      background-color: #0d1117 !important;
      border: 1px solid #30363d;
    }
    
    [data-theme="dark"] .markdown-body .highlight pre code,
    [data-theme="dark"] .markdown-body pre code {
      background-color: transparent !important;
      color: #e6edf3 !important;
    }
    
    /* Ensure code blocks render properly */
    [data-theme="dark"] .markdown-body pre code.hljs {
      background-color: transparent !important;
      color: #e6edf3 !important;
      padding: 0;
    }
    
    [data-theme="dark"] .markdown-body .hljs {
      background-color: #0d1117 !important;
      color: #e6edf3 !important;
    }
    
    /* Light theme code blocks */
    [data-theme="light"] .markdown-body .highlight pre,
    [data-theme="light"] .markdown-body pre {
      background-color: #f6f8fa !important;
      border: 1px solid #d0d7de;
    }
    
    [data-theme="light"] .markdown-body .highlight pre code,
    [data-theme="light"] .markdown-body pre code {
      background-color: transparent !important;
      color: #24292f !important;
    }
    
    /* GitHub's actual syntax highlighting classes for dark mode */
    [data-theme="dark"] .markdown-body .highlight .kd { color: #ff7b72; } /* Keywords declarations (function, class, etc) - red */
    [data-theme="dark"] .markdown-body .highlight .k { color: #ff7b72; } /* Keywords (if, else, for, etc) - red */
    [data-theme="dark"] .markdown-body .highlight .nx { color: #e6edf3; } /* Names/identifiers - light gray */
    [data-theme="dark"] .markdown-body .highlight .nf { color: #d2a8ff; } /* Function names - purple */
    [data-theme="dark"] .markdown-body .highlight .s1, 
    [data-theme="dark"] .markdown-body .highlight .s2,
    [data-theme="dark"] .markdown-body .highlight .s { color: #a5d6ff; } /* Strings - blue */
    [data-theme="dark"] .markdown-body .highlight .c1,
    [data-theme="dark"] .markdown-body .highlight .c { color: #8b949e; } /* Comments - gray */
    [data-theme="dark"] .markdown-body .highlight .p { color: #e6edf3; } /* Punctuation - light gray */
    [data-theme="dark"] .markdown-body .highlight .mi,
    [data-theme="dark"] .markdown-body .highlight .mf,
    [data-theme="dark"] .markdown-body .highlight .m { color: #79c0ff; } /* Numbers - blue */
    [data-theme="dark"] .markdown-body .highlight .kc { color: #79c0ff; } /* Constants (true, false, null) - blue */
    [data-theme="dark"] .markdown-body .highlight .kt { color: #ff7b72; } /* Type keywords - red */
    [data-theme="dark"] .markdown-body .highlight .na { color: #7ee787; } /* Attributes - green */
    [data-theme="dark"] .markdown-body .highlight .nb { color: #ffa657; } /* Built-ins - orange */
    [data-theme="dark"] .markdown-body .highlight .nc { color: #ffa657; } /* Classes - orange */
    [data-theme="dark"] .markdown-body .highlight .ne { color: #f85149; } /* Exceptions - bright red */
    [data-theme="dark"] .markdown-body .highlight .o { color: #ff7b72; } /* Operators - red */
    [data-theme="dark"] .markdown-body .highlight .ow { color: #ff7b72; } /* Word operators (and, or, not) - red */
    
    /* GitHub's syntax highlighting classes for light mode - GitHub Pages style */
    [data-theme="light"] .markdown-body .highlight .kd { color: #24292e; font-weight: bold; } /* Keywords declarations - bold black */
    [data-theme="light"] .markdown-body .highlight .k { color: #24292e; font-weight: bold; } /* Keywords - bold black */
    [data-theme="light"] .markdown-body .highlight .nx { color: #24292e; } /* Names/identifiers - dark gray */
    [data-theme="light"] .markdown-body .highlight .nf { color: #24292e; } /* Function names - black */
    [data-theme="light"] .markdown-body .highlight .s1, 
    [data-theme="light"] .markdown-body .highlight .s2,
    [data-theme="light"] .markdown-body .highlight .s { color: #032f62; } /* Strings - dark blue */
    [data-theme="light"] .markdown-body .highlight .c1,
    [data-theme="light"] .markdown-body .highlight .c { color: #6a737d; font-style: italic; } /* Comments - gray italic */
    [data-theme="light"] .markdown-body .highlight .p { color: #24292e; } /* Punctuation - dark gray */
    [data-theme="light"] .markdown-body .highlight .mi,
    [data-theme="light"] .markdown-body .highlight .mf,
    [data-theme="light"] .markdown-body .highlight .m { color: #005cc5; } /* Numbers - blue */
    [data-theme="light"] .markdown-body .highlight .kc { color: #24292e; font-weight: bold; } /* Constants - bold black */
    [data-theme="light"] .markdown-body .highlight .kt { color: #24292e; font-weight: bold; } /* Type keywords - bold black */
    [data-theme="light"] .markdown-body .highlight .na { color: #22863a; } /* Attributes - green */
    [data-theme="light"] .markdown-body .highlight .nb { color: #005cc5; } /* Built-ins - blue */
    [data-theme="light"] .markdown-body .highlight .nc { color: #24292e; font-weight: bold; } /* Classes - bold black */
    [data-theme="light"] .markdown-body .highlight .ne { color: #24292e; font-weight: bold; } /* Exceptions - bold black */
    [data-theme="light"] .markdown-body .highlight .o { color: #24292e; } /* Operators - black */
    [data-theme="light"] .markdown-body .highlight .ow { color: #24292e; } /* Word operators - black */
    
    /* Better dropdown animations and interactions */
    .folder-toggle {
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .folder-toggle:hover {
      opacity: 0.8;
    }
    
    .chevron-icon {
      transition: transform 0.2s ease;
    }
    
    .dropdown {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .dropdown.open {
      max-height: 1000px;
    }
    
    /* Additional syntax highlighting classes for more comprehensive coloring */
    [data-theme="dark"] .markdown-body .pl-kos { color: #ff7b72; } /* Keyword operators */
    [data-theme="dark"] .markdown-body .pl-ent { color: #7ee787; } /* Entity names (green) */
    [data-theme="dark"] .markdown-body .pl-e { color: #ff7b72; } /* Element names (red) */
    [data-theme="dark"] .markdown-body .pl-pse { color: #ff7b72; } /* Pseudo elements (red) */
    [data-theme="dark"] .markdown-body .pl-psf { color: #d2a8ff; } /* Pseudo functions (purple) */
    [data-theme="dark"] .markdown-body .pl-bu { color: #f85149; } /* Built-ins (bright red) */
    [data-theme="dark"] .markdown-body .pl-ii { color: #f85149; } /* Invalid/illegal (bright red) */
    [data-theme="dark"] .markdown-body .pl-corl { color: #a5d6ff; } /* Correlation (blue) */
    [data-theme="dark"] .markdown-body .pl-mb { color: #d2a8ff; } /* Markup bold (purple) */
    [data-theme="dark"] .markdown-body .pl-mi2 { color: #79c0ff; } /* Numbers alternative (blue) */
    [data-theme="dark"] .markdown-body .pl-mdr { color: #d2a8ff; } /* Markup deleted (purple) */
    [data-theme="dark"] .markdown-body .pl-mc { color: #a5d6ff; } /* Markup changed (blue) */
    [data-theme="dark"] .markdown-body .pl-mh { color: #1f6feb; } /* Markup headings (blue) */
    [data-theme="dark"] .markdown-body .pl-ms { color: #7ee787; } /* Markup subheading (green) */
    [data-theme="dark"] .markdown-body .pl-ml { color: #ffdf5d; } /* Markup list (yellow) */
    
    /* TypeScript and JavaScript specific syntax highlighting */
    [data-theme="dark"] .markdown-body .pl-sr { color: #7ee787; } /* String regex (green) */
    [data-theme="dark"] .markdown-body .pl-vpf { color: #d2a8ff; } /* Variable.parameter.function (purple) */
    [data-theme="dark"] .markdown-body .pl-id { color: #ff7b72; } /* Invalid.deprecated (red) */
    [data-theme="dark"] .markdown-body .pl-token.keyword { color: #ff7b72; } /* Token keywords (red) */
    [data-theme="dark"] .markdown-body .pl-token.string { color: #a5d6ff; } /* Token strings (blue) */
    [data-theme="dark"] .markdown-body .pl-token.function { color: #d2a8ff; } /* Token functions (purple) */
    [data-theme="dark"] .markdown-body .pl-token.boolean { color: #79c0ff; } /* Token booleans (blue) */
    [data-theme="dark"] .markdown-body .pl-token.number { color: #79c0ff; } /* Token numbers (blue) */
    [data-theme="dark"] .markdown-body .pl-token.operator { color: #ff7b72; } /* Token operators (red) */
    [data-theme="dark"] .markdown-body .pl-token.punctuation { color: #e6edf3; } /* Token punctuation (white) */
    
    /* Navigation buttons styling */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
      margin-bottom: 2rem;
      gap: 1rem;
    }
    
    .nav-buttons button {
      padding: 1rem 2rem;
      font-size: 1rem;
      cursor: pointer;
      background-color: #f6f8fa;
      color: #24292e;
      border: 1px solid #d0d7de;
      border-radius: 6px;
      transition: all 0.2s ease;
    }
    
    .nav-buttons button:hover:not(:disabled) {
      background-color: #f3f4f6;
      border-color: #8b949e;
    }
    
    .nav-buttons button:disabled {
      background-color: #f6f8fa;
      color: #8b949e;
      cursor: not-allowed;
      opacity: 0.6;
    }
    
    /* Dark mode navigation buttons */
    [data-theme="dark"] .nav-buttons button {
      background-color: #21262d;
      color: #e6edf3;
      border-color: #30363d;
    }
    
    [data-theme="dark"] .nav-buttons button:hover:not(:disabled) {
      background-color: #30363d;
      border-color: #8b949e;
    }
    
    [data-theme="dark"] .nav-buttons button:disabled {
      background-color: #21262d;
      color: #6e7681;
      border-color: #21262d;
    }
  </style>
</head>
  <!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D794QVKBJQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-D794QVKBJQ');
</script>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="sidebar-backdrop" id="sidebar-backdrop"></div>
      <div class="header-row">
    <div class="left-nav">
    <button class="hamburger" id="menu-toggle">☰</button>
    <div class="logo"><a href="/ben-worlds-documentation/" id="logo-link">MHCP Creator Made Docs</a></div>
    <div class="mobile-title mobile-only"><a href="/ben-worlds-documentation/">Creator Docs</a></div>
    <nav class="nav-links">
      <a href="/ben-worlds-documentation/docs/">Creator Docs</a>
      <a href="https://developers.meta.com/horizon-worlds/learn">Meta Docs</a>
      <a href="https://github.com/MHCPCreators/horizonCreatorManual">Creator Manual</a>
      <a href="https://communityforums.atmeta.com/t5/Creator-Forum/ct-p/Meta_Horizon_Creator_Forums">Forums</a>
      <a href="/ben-worlds-documentation/docs/">Contribute</a>
    </nav>
    </div>
          <div class="right-controls">
              <a href="https://www.youtube.com/@metahorizoncreatorprogram" target="_blank" style="color: #FF0000;">
            <i class="fab fa-youtube"></i>
            </a>
      <button id="theme-toggle" aria-label="Toggle dark mode">🌙/☀️</button>
  </div>
  </div>
</header>
<div class="page-body">
  <aside class="sidebar">
  <button class="sidebar-close" id="sidebar-close" aria-label="Close sidebar">✕</button>
    <h2>Documentation</h2>
    <input type="text" id="search-input" placeholder="Search documents..." />
    
    <!-- Jekyll-generated automatic sidebar -->
    
    <ul id="doc-list">
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Creating a world</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/building-your-first-world/" 
                   >
                  Building your first world
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/worlds-tools-overview/" 
                   >
                  Worlds tools overview
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/create-a-clean-game-HUD-for-Worlds/" 
                   >
                  Create a clean game HUD for Worlds
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/create-a-versatile-holster-system-in-Worlds/" 
                   >
                  Create a versatile holster system in Worlds
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/inventory-systems-unlock-the-power-of-player-inventories/" 
                   >
                  Inventory systems - unlock the power of player inventories
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/creating-a-world/mobile-worlds-crash-course/" 
                   >
                  Mobile worlds crash course
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Generative ai tools</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/generative-ai-tools/hands-on-with-GenAI-toolkit-for-Worlds-full-feature-tour/" 
                   >
                  Hands-on with GenAI toolkit for Worlds - full feature tour
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/generative-ai-tools/build-a-player-guided-lobby-with-mesh-gen/" 
                   >
                  Build a player-guided lobby with mesh gen
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/generative-ai-tools/code-faster-with-copilot-in-the-Worlds-desktop-editor-&-VSCode/" 
                   >
                  Code faster with Copilot in the Worlds desktop editor & VSCode
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Getting started with scripting</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/getting-started-with-scripting/TypeScript-basics-beginner-friendly-session-for-Worlds/" 
                   >
                  TypeScript basics: beginner-friendly session for Worlds
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/getting-started-with-scripting/15-Worlds-TypeScript-API-2.0-tips-and-tricks/" 
                   >
                  15 Worlds TypeScript API 2.0 tips and tricks
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/getting-started-with-scripting/codeblocks-to-TypeScript/" 
                   >
                  CodeBlocks to TypeScript
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/getting-started-with-scripting/PlayerControls-API-&-focused-interaction-in-Worlds/" 
                   >
                  PlayerControls API & focused interaction in Worlds
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Manuals and cheat sheets</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/manuals-and-cheat-sheets/get-started/" 
                   >
                  Get started
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Meshes materials import</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/meshes-materials-import/15-blender-tips-for-Horizon-assets/" 
                   >
                  15 blender tips for Horizon assets
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Scripting concepts persistence apis</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/" 
                   class="active">
                  TypeScript Conventions and Best Practices for Horizon Worlds
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/interactive-laser-pen-for-mobile-worlds-build-along/" 
                   >
                  Interactive laser pen for mobile worlds: build-along
                </a>
              </li>
            
          </ul>
        </li>
      
        
        <li>
          <div class="folder-toggle">
            <span class="folder-name">Understanding the desktop editor</span>
            <svg class="chevron-icon" width="12" height="12" viewBox="0 0 320 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>
            </svg>
          </div>
          <ul class="dropdown open">
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-editor-101/" 
                   >
                  Worlds desktop editor 101
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-tools-basics/" 
                   >
                  Worlds desktop tools basics
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/boost-performance-top-7-spawning-&-streaming-tricks/" 
                   >
                  Boost performance - top 7 spawning & streaming tricks
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/collaboratively-build-with-shared-asset-templates/" 
                   >
                  Collaboratively build with shared asset templates
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/improve-frame-rates-and-custom-asset-bloat/" 
                   >
                  Improve frame rates and custom asset bloat
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/asset-spawning-&-world-streaming/" 
                   >
                  Asset spawning & world streaming
                </a>
              </li>
            
              <li>
                <a href="/ben-worlds-documentation/docs/understanding-the-desktop-editor/trace,-fix,-&-optimize-world-performance-issues/" 
                   >
                  Trace, fix, & optimize world performance issues
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
    
    <hr class="mobile-sidebar-divider mobile-only" />
<div class="mobile-sidebar-nav mobile-only">
  <a href="/ben-worlds-documentation/docs/">Creator Docs</a>
  <a href="https://developers.meta.com/horizon-worlds/learn">Meta Docs</a>
  <a href="https://github.com/MHCPCreators/horizonCreatorManual">Creator Manual</a>
  <a href="https://communityforums.atmeta.com/t5/Creator-Forum/ct-p/Meta_Horizon_Creator_Forums">Forums</a>
  <a href="/ben-worlds-documentation/docs/">Contribute</a>
</div>

  </aside>

  <main class="content">
    <div class="doc-container">
      <div id="doc-content"> <article class="markdown-body">
  <h1>TypeScript Conventions and Best Practices for Horizon Worlds</h1>
  
    <p class="description">Comprehensive guide to TypeScript conventions and best practices</p>
  
  
  <p align="center">
<b>TypeScript Conventions and Best Practices for Horizon Worlds</b><br />
December 2024<br />
(Updated formatting July 2025)<br />
Shards632<br />
</p>

<h1 id="introduction">Introduction</h1>

<p>TypeScript is a robust and full-featured computer programming language that is derived from JavaScript (also known as ECMAScript). Like most computer languages, it does not come with any official formatting guidelines to enforce consistency, and, due to its legacy in JavaScript, contains some language features that are best just avoided.</p>

<p>This document will endeavor to present a consistent formatting style for use by Horizon Worlds TypeScript developers, while listing best practices that TypeScript developers ought to follow in order to avoid falling into some of the pitfalls of the language that either are just ‘bad’ or do not translate well to the Horizon Worlds environment.</p>

<h2 id="prerequisites-and-expectations">Prerequisites and Expectations</h2>

<p>This is not a document about ‘learning typescript’ or even about ‘learning the Horizon Worlds typescript api’. It is expected that you are coming to this document with some experience with programming languages, and some experience in writing scripts for Horizon Worlds.</p>

<p>Following conventions and best practices are not <em>required</em> for writing code in Horizon Worlds. The purpose of conventions and best practices is to make your code easier for others to understand (and for you to understand other people’s code more easily), and to avoid common mistakes that are caused by formatting ambiguities or language features that are easy to use incorrectly. Some choices for conventions can seem a bit arbitrary, but the <em>most important</em> thing about conventions is that some decisions are made and that people try to follow them whenever possible.</p>

<h2 id="document-organization">Document Organization</h2>

<p>This document has a shorter Minimal Recommendations section that, if you adopt nothing else, you should at least do, followed by an Extended Recommendations section that has a more robust set of rules.</p>

<p>Some of the recommendations are stronger than others and should almost always be followed, while others are perhaps a bit more difficult to apply consistently or are considered ‘controversial’.</p>

<p>Finally, if you are using an IDE like VSCode or Webstorm or similar to write your typescript code (rather than, say Notepad or something), there are freely available plugins that you can install that will handle many of these recommendations for you automatically (and probably even more!). If you’re impatient, skip to the <a href="#tldr-plugins">TL;DR Plugins</a> section, install those tools, and be on your way.</p>

<h1 id="-minimal-recommendations-tldr">👉🏻 Minimal Recommendations TL;DR</h1>

<p>If you adopt nothing else, you should at least do (or not do) the following:</p>

<table>
  <thead>
    <tr>
      <th><a href="#whitespace">Whitespace</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#use-spaces-not-tabs">✅ Use Spaces, not Tab</a></td>
    </tr>
    <tr>
      <td><a href="#use-consistent-indentation-amounts">✅ Use consistent indentation amounts</a></td>
    </tr>
    <tr>
      <td><a href="#always-use-curly-braces-on-control-flow-blocks">✅ Always use curly braces on control flow blocks</a></td>
    </tr>
    <tr>
      <td><a href="#separate-adjacent-methods-in-a-class-with-a-blank-line">✅ Separate adjacent methods in a class with a blank line</a></td>
    </tr>
    <tr>
      <td><a href="#dont-use-string-continuations-instead-append-strings">🚫 Don’t use string continuations, instead append strings</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#language-features">Language Features</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#always-include-a-default-in-switch-statements">✅ Always include a default in switch statements</a></td>
    </tr>
    <tr>
      <td><a href="#use--rather-than--for-defaults-on-undefined-values">✅ Use ?? rather than || for defaults on undefined values</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using-as">⚠️ Avoid using as</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using--on-null-or-undefined-values">⚠️ Avoid using ! on null or undefined values</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using-number-boolean-string-object-as-types">⚠️ Avoid using Number, Boolean, String, Object as types</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using-forin">⚠️ Avoid using for…in</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using-new-array">⚠️ Avoid using new Array()</a></td>
    </tr>
    <tr>
      <td><a href="#do-not-compare-booleans-to-true-or-false">🚫 Do not compare booleans to true or false</a></td>
    </tr>
    <tr>
      <td><a href="#do-not-write-non-trivial-fallthrough-case-statements">🚫 Do not write non-trivial fallthrough case statements</a></td>
    </tr>
    <tr>
      <td><a href="#do-not-use-the--type-as-an-opaque-type">🚫 Do not use the {} type as an opaque type</a></td>
    </tr>
    <tr>
      <td><a href="#never-use-any">❌ Never use any</a></td>
    </tr>
    <tr>
      <td><a href="#never-use--or--for-equality-checks-use--and--instead">❌ Never use == or != for equality checks, Use === and !== instead</a></td>
    </tr>
    <tr>
      <td><a href="#never-use-var">❌ Never use var</a></td>
    </tr>
    <tr>
      <td><a href="#never-do-assignment-in-a-conditional-statement">❌ Never do assignment in a conditional statement</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#naming">Naming</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#only-use-7-bit-alphanumeric-characters-and-_-for-identifiers">✅ Only use 7-bit alphanumeric characters and _ for identifiers</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#horizon-worlds-features">Horizon Worlds Features</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>✅ Define Events once and export to all users</td>
    </tr>
    <tr>
      <td>✅ Prefer NetworkEvents and LocalEvents over CodeBlockEvents</td>
    </tr>
    <tr>
      <td>✅ Always quote asset ids as strings</td>
    </tr>
    <tr>
      <td>🚫 Do not use bind() when registering event handlers, use arrow functions</td>
    </tr>
    <tr>
      <td>🚫 Don’t connect to events in start(), use preStart()</td>
    </tr>
    <tr>
      <td>❌ Never send events in preStart(), use start() instead.</td>
    </tr>
    <tr>
      <td>❌ Never subclass a Horizon Worlds API class other than Component or UIComponent</td>
    </tr>
  </tbody>
</table>

<h1 id="-extended-recommendations-tldr">👉🏻 Extended Recommendations TL;DR</h1>

<p>A more robust set of recommendations</p>

<table>
  <thead>
    <tr>
      <th><a href="#whitespace-1">Whitespace</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[✅ Use whitespace liberally (there is no fee for use!)] (#use-whitespace-liberally-there-is-no-fee-for-use)</td>
    </tr>
    <tr>
      <td><a href="#put-control-flow-blocks-on-their-own-line">✅ Put control flow blocks on their own line</a></td>
    </tr>
    <tr>
      <td><a href="#use-semicolons-to-end-statements">✅ Use semicolons to end statements</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#language-features">Language Features</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>✅ <a href="#use-const-rather-than-let-on-localglobal-variables-whenever-possible">Use const rather than let on local/global variables whenever possible</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-readonly-on-class-variables-whenever-possible">Use readonly on class variables whenever possible</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#mark-class-variables-and-methods-private-or-protected-whenever-possible">Mark class variables and methods private (or protected) whenever possible</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-parameter-properties-on-constructor-arguments">Use parameter properties on constructor arguments</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-override-on-all-class-methods-that-are-being-overridden-especially-start-and-prestart">Use override on all class methods that are being overridden, especially start() and preStart()</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-undefined-rather-than-null">Use undefined rather than null</a></td>
    </tr>
    <tr>
      <td>✅ [For simple arrays of type T, use T[] and readonly T[] rather than Array<T> or ReadonlyArray<T>](#for-simple-arrays-of-type-t-use-t-and-readonly-t-rather-than-arrayt-or-readonlyarrayt)</T></T></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-interpolated-strings-only-when-there-is-interpolation">Use interpolated strings only when there is interpolation</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-tuples-rather-than-returning-pair-objects">Use tuples rather than returning pair objects</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#minimize-escape-characters-in-strings">Minimize escape characters in strings</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-foreach-map-reduce-and-filter-instead-of-writing-for-loops">Use forEach(), map(), reduce(), and filter() instead of writing for() loops</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#prefer-the-mapk-v-type-rather-than-using-object-or-recordk-v-types-for-keyvalue-mappings">Prefer the Map&lt;K, V&gt; type rather than using object or Record&lt;K, V&gt; types for key/value mappings</a></td>
    </tr>
    <tr>
      <td>✅ <a href="#use-the-spread-operator--to-concatenate-arrays-and-objects">Use the spread operator … to concatenate arrays and objects</a></td>
    </tr>
    <tr>
      <td><a href="#export-only-whats-needed">✅ Export only what’s needed</a></td>
    </tr>
    <tr>
      <td><a href="#consider-destructured-imports">🤔 Consider destructured imports</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-using-methods-on-the-object-class">⚠️ Avoid using methods on the Object class</a></td>
    </tr>
    <tr>
      <td><a href="#do-not-assign-arrow-functions-to-class-member-variables">🚫 Do not assign arrow functions to class member variables</a></td>
    </tr>
    <tr>
      <td><a href="#omit-obvious-types-when-initializing-variables-at-declaration">🚫 Omit obvious types when initializing variables at declaration</a></td>
    </tr>
    <tr>
      <td><a href="#do-not-assign-function-declarations-to-variables-or-pass-them-as-arguments">🚫 Do not assign function declarations to variables or pass them as arguments</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#naming-1">Naming</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#pascalcase-for-types-camelcase-for-variablesfunctions-capitalized_snake_case-for-global-constants">✅ PascalCase for types, camelCase for variables/functions, CAPITALIZED_SNAKE_CASE for global constants</a></td>
    </tr>
    <tr>
      <td><a href="#use-descriptive-names">✅ Use descriptive names</a></td>
    </tr>
    <tr>
      <td><a href="#dont-use-_-underline-prefix-for-private-member-variables">🚫 Don’t use _ (underline) prefix for private member variables</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#layout">Layout</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#all-imports-at-top-of-file">✅ All imports at top of file</a></td>
    </tr>
    <tr>
      <td><a href="#organize-files-with-type-definitions-first-then-globals-then-classes">✅ Organize files with type definitions first, then globals, then classes</a></td>
    </tr>
    <tr>
      <td><a href="#organize-classes-with-statics-then-variables-then-methods">✅ Organize classes with statics, then variables, then methods</a></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><a href="#general">General</a></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#comment-the-important-things">✅ Comment the important things</a></td>
    </tr>
    <tr>
      <td><a href="#write-tsdoc-comments-on-functions-and-on-important-variablesclasses">✅ Write TSDoc comments on functions and on important variables/classes</a></td>
    </tr>
    <tr>
      <td><a href="#separate-unrelated-components-into-separate-files">✅ Separate unrelated Components into separate files</a></td>
    </tr>
    <tr>
      <td><a href="#use-line-comments-for-internal-implementation-details">✅ Use line comments for internal implementation details</a></td>
    </tr>
    <tr>
      <td><a href="#avoid-clever-code">✅ Avoid clever code</a></td>
    </tr>
  </tbody>
</table>

<h1 id="minimal-recommendations">Minimal Recommendations</h1>

<h2 id="whitespace">Whitespace</h2>

<h3 id="use-spaces-not-tabs">Use spaces, not tabs</h3>

<p>Never use tabs for indenting your code. Different people may have different tab stop settings and when they invariably get mixed in with people who indent using spacing, the formatting can become a mess.</p>

<h3 id="use-consistent-indentation-amounts">Use consistent indentation amounts</h3>

<p>Use the same indentation level amounts in your code. Do not indent some levels by three spaces and others by seven spaces and others by zero spaces. The typical indentation amount for typescript code is 2 spaces per level.</p>

<p><strong>✅ Do this:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFunction</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">someCondition</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do some things</span>
    <span class="c1">// do some other things</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// do something 10 times</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>🚫 Not this:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">myFunction</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">someCondition</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do some things</span>
      <span class="c1">// do some other things</span>
   <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something 10 times</span>
<span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="always-use-curly-braces-on-control-flow-blocks">Always use curly braces on control flow blocks</h3>

<p>When you have a sub-block of code, such as with an <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">else</code>, <code class="language-plaintext highlighter-rouge">for</code>, or <code class="language-plaintext highlighter-rouge">while</code> block, always use curly braces to enclose it. Critical errors can be prevented by always enclosing blocks in curly braces rather than leaving them hanging naked where someone might erroneously add a line that executes when unexpected.</p>

<p>✅ Do this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">someBoolean</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">return</span><span class="p">;</span>
<span class="p">}</span> 

<span class="k">while</span> <span class="p">(</span><span class="nx">keepLooping</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">inLoop</span><span class="p">();</span>
<span class="p">}</span> 

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">doLoop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">someBoolean</span><span class="p">)</span> 
 <span class="k">return</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">keepLooping</span><span class="p">)</span> 
 <span class="nx">inLoop</span><span class="p">();</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> 
 <span class="nx">doLoop</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="separate-adjacent-methods-in-a-class-with-a-blank-line">Separate adjacent methods in a class with a blank line</h3>

<p>It is difficult to see the end of one method and the start of another if they run together without an empty line break in between them.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>

  <span class="nx">method1</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do stuff</span>
  <span class="p">}</span>

  <span class="nx">method2</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do other stuff</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
  <span class="nx">method1</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do stuff</span>
  <span class="p">}</span>
  <span class="nx">method2</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// do other stuff</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="dont-use-string-continuations-instead-append-strings">Don’t use string continuations, instead append strings</h3>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">A very long string</span><span class="dl">"</span> <span class="o">+</span>
    <span class="dl">"</span><span class="s2">crossing multiple lines.</span><span class="dl">"</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">A very long string</span><span class="se">\</span><span class="s2">
    crossing multiple lines.</span><span class="dl">"</span>
</code></pre></div></div>

<h2 id="language-features">Language features</h2>

<h3 id="never-use-any">Never use <code class="language-plaintext highlighter-rouge">any</code></h3>

<p>If you don’t know the type of something, use <code class="language-plaintext highlighter-rouge">unknown</code>. Use of the <code class="language-plaintext highlighter-rouge">any</code> keyword turns off typescript’s type checking, which defeats a large amount of the benefit of using typescript over javascript.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">somethingUnknown</span><span class="p">:</span> <span class="nx">unknown</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">somethingUnknown</span><span class="p">:</span> <span class="kr">any</span>
</code></pre></div></div>

<h3 id="never-use-var">Never use <code class="language-plaintext highlighter-rouge">var</code></h3>

<p>Use <code class="language-plaintext highlighter-rouge">let</code> or <code class="language-plaintext highlighter-rouge">const</code> for all variable declarations. The use of <code class="language-plaintext highlighter-rouge">var</code> has unexpected scoping consequences that can cause difficult to track down bugs.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">somethingTrue</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">value</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
</code></pre></div></div>

<p>🚫 Not this::</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">somethingTrue</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="avoid-using-as">Avoid using <code class="language-plaintext highlighter-rouge">as</code></h3>

<p>Likewise, the <code class="language-plaintext highlighter-rouge">as</code> keyword is you telling typescript that the type is different than it thinks, and partially defeats the typing system. Instead, use an <code class="language-plaintext highlighter-rouge">if</code> statement to test that the object is an <code class="language-plaintext highlighter-rouge">instanceof</code> the class you expect.</p>

<p>Assuming these definitions:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">SomeType</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">SubType</span> <span class="kd">extends</span> <span class="nx">SomeType</span> <span class="p">{</span>
  <span class="nx">doThing</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// subtype thing</span>
  <span class="p">}</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">doIfSubType</span><span class="p">(</span><span class="nx">thing</span><span class="p">:</span> <span class="nx">SomeType</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">foo</span> <span class="k">instanceof</span> <span class="nx">SubType</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">foo</span><span class="p">.</span><span class="nx">doThing</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">doIfSubType</span><span class="p">(</span><span class="nx">thing</span><span class="p">:</span> <span class="nx">SomeType</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="nx">thing</span> <span class="k">as</span> <span class="nx">SubType</span><span class="p">).</span><span class="nx">doThing</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>There are a few rare cases where using <code class="language-plaintext highlighter-rouge">as</code> is important, such as when you mark an explicit structure <code class="language-plaintext highlighter-rouge">as const</code> to indicate the values cannot be changed.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Events</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">myEvent1</span><span class="p">:</span> <span class="k">new</span> <span class="nx">LocalEvent</span><span class="p">(</span><span class="dl">'</span><span class="s1">event1</span><span class="dl">'</span><span class="p">),</span>
   <span class="na">myEvent2</span><span class="p">:</span> <span class="k">new</span> <span class="nx">LocalEvent</span><span class="p">(</span><span class="dl">'</span><span class="s1">event2</span><span class="dl">'</span><span class="p">),</span>
<span class="p">}</span> <span class="k">as</span> <span class="kd">const</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>Note:</strong> This does not include a prohibition on the <code class="language-plaintext highlighter-rouge">Entity.as()</code> method, of which use is necessary to convert Horizon Worlds Entity types to their corresponding Gizmos.</p>

<h3 id="avoid-using--on-null-or-undefined-values">Avoid using <code class="language-plaintext highlighter-rouge">!</code> on <code class="language-plaintext highlighter-rouge">null</code> or <code class="language-plaintext highlighter-rouge">undefined</code> values</h3>

<p>Similar to using <code class="language-plaintext highlighter-rouge">any</code>, the use of <code class="language-plaintext highlighter-rouge">!</code> tells typescript to ignore its typing checks because you know better that the variable is actually defined. Typescript is very good at tracking the types of variables, so if you find yourself forcing typescript to treat something as defined that it thinks may not be, ask yourself if you <em>really</em> understand what’s going on.</p>

<p>Preferably, rewrite your code using an if statement to check for undefined or <code class="language-plaintext highlighter-rouge">null</code> (or nullish values) so that the type guard will remove the necessity of using <code class="language-plaintext highlighter-rouge">!</code>. Also, use <code class="language-plaintext highlighter-rouge">?</code>, when possible, to short circuit statements that might be undefined.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">thing</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">thing</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// explicit check</span>
  <span class="nx">thing</span><span class="p">.</span><span class="nx">callFunction</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">thing</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// check for nullish / falsy value</span>
  <span class="nx">thing</span><span class="p">.</span><span class="nx">callFunction</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">thing</span><span class="p">?.</span><span class="nx">callFunction</span><span class="p">();</span> <span class="c1">// optional chaining</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">thing</span><span class="o">!</span><span class="p">.</span><span class="nx">callFunction</span><span class="p">();</span>
</code></pre></div></div>

<p>Unfortunately, the <code class="language-plaintext highlighter-rouge">props</code> on Components may be undefined if nothing was wired up to them. You really ought to check they are not <code class="language-plaintext highlighter-rouge">undefined</code> before you use them. At the very least, check in <code class="language-plaintext highlighter-rouge">start()</code> or <code class="language-plaintext highlighter-rouge">preStart()</code> that all the <code class="language-plaintext highlighter-rouge">props</code> are defined and if not, emit a very large <code class="language-plaintext highlighter-rouge">console.error()</code> and throw an exception before you go adding <code class="language-plaintext highlighter-rouge">this.props.myProp!</code> In other methods in the class.</p>

<p>Example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyComponent</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">MyComponent</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">static</span> <span class="nx">propsDefinition</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">prop1</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">Entity</span> <span class="p">},</span>
    <span class="na">prop2</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">Entity</span> <span class="p">},</span>
  <span class="p">}</span>

  <span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">prop1</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">prop2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">prop1 or prop2 are not set!</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">fatal config error</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// kills the script at world start</span>
    <span class="p">}</span>
    <span class="c1">// no need for ! here because the if test above protects this statement</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">prop1</span><span class="p">,</span> <span class="nx">SomeEvent</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* some action */</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// safe-ish to use ! here because start() will never be called if preStart() throws an Error killing the script</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sendLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">prop2</span><span class="o">!</span><span class="p">,</span> <span class="nx">SomeEvent</span><span class="p">,</span> <span class="p">{});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="avoid-using-number-boolean-string-object-as-types">Avoid using <code class="language-plaintext highlighter-rouge">Number</code>, <code class="language-plaintext highlighter-rouge">Boolean</code>, <code class="language-plaintext highlighter-rouge">String</code>, <code class="language-plaintext highlighter-rouge">Object</code> as types</h3>

<p>These capitalized versions of <code class="language-plaintext highlighter-rouge">number</code>, <code class="language-plaintext highlighter-rouge">boolean</code>, <code class="language-plaintext highlighter-rouge">string</code>, and <code class="language-plaintext highlighter-rouge">object</code> are wrappers for the primitive types, and only need to be used as types for special purposes. You almost always want to avoid the wrappers and use the primitive types instead.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">someNum</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">3</span>
<span class="kd">function</span> <span class="nx">doThing</span><span class="p">(</span><span class="nx">someString</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">boolean</span>
</code></pre></div></div>

<p>🚫 Not this::</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">someNum</span><span class="p">:</span> <span class="nb">Number</span> <span class="o">=</span> <span class="mi">3</span>
<span class="kd">function</span> <span class="nx">doThing</span><span class="p">(</span><span class="nx">someString</span><span class="p">:</span> <span class="nb">String</span><span class="p">):</span> <span class="nb">Boolean</span>
</code></pre></div></div>

<p>These classes <em>do</em> have a lot of useful functions for manipulating <code class="language-plaintext highlighter-rouge">number</code>s, <code class="language-plaintext highlighter-rouge">strings</code>s, etc. It is ok to use those functions on the classes.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ok</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="nx">someNumber</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// do integer things with someNumber</span>
<span class="p">}</span>

<span class="c1">// ok</span>
<span class="kd">const</span> <span class="nx">oneHalf</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">189</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="never-use--or--for-equality-checks-use--and--instead">Never use <code class="language-plaintext highlighter-rouge">==</code> or <code class="language-plaintext highlighter-rouge">!=</code> for equality checks (Use <code class="language-plaintext highlighter-rouge">===</code> and <code class="language-plaintext highlighter-rouge">!==</code> instead)</h3>

<p>Never use the <code class="language-plaintext highlighter-rouge">==</code> and <code class="language-plaintext highlighter-rouge">!=</code> operators to compare values. They will sometimes do some unexpected type conversions and will return true or false when you would think they would do the opposite.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">someNumber</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">someString</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do stuff</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">someNumber</span> <span class="o">==</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">someString</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do stuff</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="never-do-assignment-in-a-conditional-statement">Never do assignment in a conditional statement</h3>

<p>Never assign a variable value using <code class="language-plaintext highlighter-rouge">=</code> in a conditional statement. It leaves people wondering whether you really meant to use an equality check rather than assignment. Also, a side effect of assigning a value within a conditional statement is unexpected and makes your code difficult to understand.</p>

<p>✅ Do this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">storedValue</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">setAndCheckValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">storedValue</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">storedValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do thing</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>🚫 Not this::</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">storedValue</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="kd">function</span> <span class="nx">setAndCheckValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">storedValue</span> <span class="o">=</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do thing</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="use--rather-than--for-defaults-on-undefined-values">Use <code class="language-plaintext highlighter-rouge">??</code> rather than <code class="language-plaintext highlighter-rouge">||</code> for defaults on undefined values</h3>

<p>This is similar to using <code class="language-plaintext highlighter-rouge">===</code> and <code class="language-plaintext highlighter-rouge">!==</code>, as the automatic type conversion of <code class="language-plaintext highlighter-rouge">||</code> will sometimes convert things into a binary false value that you don’t expect. Using <code class="language-plaintext highlighter-rouge">??</code> makes sure that only undefined and null values are treated as false.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">defaultIfUnset</span><span class="p">(</span><span class="nx">value</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">value</span> <span class="o">??</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">defaultIfUnset</span><span class="p">(</span><span class="nx">value</span><span class="p">?:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">value</span> <span class="o">||</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="avoid-using-forin">Avoid using <code class="language-plaintext highlighter-rouge">for…in</code></h3>

<p>The <code class="language-plaintext highlighter-rouge">for…in</code> construct loops over the keys of an array, which is rarely what you want. Instead, use <code class="language-plaintext highlighter-rouge">for…of</code>, or <code class="language-plaintext highlighter-rouge">forEach()</code></p>

<p>✅ Do this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">printNumberMembers</span><span class="p">(</span><span class="nx">values</span><span class="p">:</span> <span class="kr">number</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">printStringMembers</span><span class="p">(</span><span class="nx">values</span><span class="p">:</span> <span class="kr">string</span><span class="p">[])</span> <span class="p">{</span>
  <span class="nx">values</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">value</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">})</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">printBooleanMembers</span><span class="p">(</span><span class="nx">values</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="nx">index</span><span class="p">]);</span>
  <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<h3 id="do-not-compare-booleans-to-true-or-false">Do not compare booleans to <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code></h3>

<p>Boolean values are already <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>, so it makes no sense to compare them to boolean literals.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myBoolean1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">myBoolean2</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do stuff</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">myBoolean1</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">myBoolean2</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="do-not-write-non-trivial-fallthrough-case-statements">Do not write non-trivial fallthrough <code class="language-plaintext highlighter-rouge">case</code> statements</h3>

<p>If you have a <code class="language-plaintext highlighter-rouge">switch</code>/<code class="language-plaintext highlighter-rouge">case</code> statement, it is a common error to forget to write <code class="language-plaintext highlighter-rouge">break</code> after each <code class="language-plaintext highlighter-rouge">case</code>. The only instance where it is acceptable to not have a <code class="language-plaintext highlighter-rouge">break</code> for each <code class="language-plaintext highlighter-rouge">case</code> is if that case has zero statements, and you are just trying to group a bunch of common cases together into exactly the same action. Otherwise, always put in a <code class="language-plaintext highlighter-rouge">break</code> at the end of each <code class="language-plaintext highlighter-rouge">case</code> block (including <code class="language-plaintext highlighter-rouge">default</code>).</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="p">(</span><span class="nx">someValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nx">doThing1</span><span class="p">();</span>
    <span class="nx">doThing2</span><span class="p">();</span> <span class="c1">// explicitly do thing2 here that also applies to 1</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nx">doThing2</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">3</span><span class="p">:</span> <span class="c1">// ok to fall through because empty case</span>
  <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
    <span class="nx">doThing3And4</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="nx">doDefault</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="p">(</span><span class="nx">someValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nx">doThing1</span><span class="p">();</span>
    <span class="c1">// yucky fall through to case 2</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nx">doThing2</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nx">doThing3And4</span><span class="p">();</span> <span class="c1">// possibly unnecessary duplication</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
    <span class="nx">doThing3And4</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="nx">doDefault</span><span class="p">();</span>
    <span class="c1">// missing break on default</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="always-include-a-default-in-switch-statements">Always include a default in switch statements</h3>

<p>The last case in a switch statement should always be <code class="language-plaintext highlighter-rouge">default</code>, even if empty. If it is invalid for it to be reached because all other combinations should have been handled, it must at least log a warning or error to the console, if not throw an exception.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="p">(</span><span class="nx">someValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nx">doThing1</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nx">doThing2</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="nl">default</span><span class="p">:</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandled case</span><span class="dl">"</span><span class="p">,</span> <span class="nx">someValue</span><span class="p">)</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="p">(</span><span class="nx">someValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nx">doThing1</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nx">doThing2</span><span class="p">();</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// if you add a new possible value later, you may miss handling the case!</span>
</code></pre></div></div>

<h3 id="do-not-use-the--type-as-an-opaque-type">Do not use the <code class="language-plaintext highlighter-rouge">{}</code> type as an opaque type</h3>

<p>The <code class="language-plaintext highlighter-rouge">{}</code> type is a bit like <code class="language-plaintext highlighter-rouge">any</code>, but for <code class="language-plaintext highlighter-rouge">object</code>s. When you don’t know the type, use <code class="language-plaintext highlighter-rouge">unknown</code>. If you mean a dictionary, use <code class="language-plaintext highlighter-rouge">Record&lt;string, unknown&gt;</code>. If you mean an object, use <code class="language-plaintext highlighter-rouge">object</code>.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">someUnknownThing</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">someRecordThing</span><span class="p">:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">Type</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">someObjectThing</span><span class="p">:</span> <span class="nx">object</span><span class="p">;</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">someThing</span><span class="p">:</span> <span class="p">{}</span>
</code></pre></div></div>

<h3 id="avoid-using-new-array">Avoid using <code class="language-plaintext highlighter-rouge">new Array()</code></h3>

<p>The constructor arguments for the <code class="language-plaintext highlighter-rouge">Array</code> class are not terribly consistent and are confusing to use correctly.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myPrefilledArray</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">5</span> <span class="p">}).</span><span class="nx">fill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// 1 element boolean[] array containing [ "true" ]</span>
<span class="kd">const</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1">// 5 element empty array of any[] type</span>
<span class="kd">const</span> <span class="nx">myArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="c1">// 3 element number[] array containing [ 5, 6, 7]</span>
</code></pre></div></div>

<h2 id="naming">Naming</h2>

<h3 id="only-use-7-bit-alphanumeric-characters-and-_-for-identifiers">Only use 7-bit alphanumeric characters and _ for identifiers</h3>

<p>Do not use unicode characters in identifiers, or other special characters (such as $). Some unicode characters are very difficult to distinguish from 7-bit ascii.</p>

<h2 id="horizon-worlds-features">Horizon Worlds Features</h2>

<h3 id="do-not-use-bind-when-registering-event-handlers-use-arrow-functions">Do not use <code class="language-plaintext highlighter-rouge">bind()</code> when registering event handlers, use arrow functions</h3>

<p>Due to a design flaw in the <code class="language-plaintext highlighter-rouge">LocalEvent</code> and <code class="language-plaintext highlighter-rouge">NetworkEvent</code> types, the typescript compiler cannot always correctly type check the parameters for functions bound to event handlers if you use <code class="language-plaintext highlighter-rouge">bind()</code>. Instead, use an arrow function for registering the event. You can either explicitly pass the data object payload to a handler function, or destructure the data object so that the handler function signature is more convenient.</p>

<p>Given this definition:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myEvent1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LocalEvent</span><span class="o">&lt;</span><span class="p">{</span><span class="na">thing</span><span class="p">:</span> <span class="nx">Entity</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">}</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">myEvent1</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">myEvent2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NetworkEvent</span><span class="o">&lt;</span><span class="p">{</span> <span class="na">player</span><span class="p">:</span> <span class="nx">Player</span> <span class="p">}</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">myEvent2</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">myEvent1</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onEvent1</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectNetworkEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">myEvent2</span><span class="p">,</span> <span class="p">({</span><span class="nx">player</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onEvent2</span><span class="p">(</span><span class="nx">player</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">onEvent1</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="p">{</span><span class="nl">thing</span><span class="p">:</span> <span class="nx">Entity</span><span class="p">,</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">})</span> <span class="p">{</span>
  <span class="c1">// argument types will be checked in connect() call</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thing</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">onEvent2</span><span class="p">(</span><span class="nx">player</span><span class="p">:</span> <span class="nx">Player</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// we destructured the payload when connecting the event</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="kd">get</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">myEvent1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onEvent1</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">myEvent2</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">onEvent2</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">onEvent1</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="p">{</span><span class="nl">stuff</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">number</span><span class="p">})</span> <span class="p">{</span>
  <span class="c1">// this will compile but the values will be undefined</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">stuff</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">onEvent2</span><span class="p">(</span><span class="nx">player</span><span class="p">:</span> <span class="nx">Player</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this will compile, but player will not be a Player.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="kd">get</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note: This problem does not affect <code class="language-plaintext highlighter-rouge">CodeBlockEvents</code>, but for consistency, you should probably register all your event handlers the same way to avoid mistakes.</p>

<h3 id="dont-connect-to-events-in-start-use-prestart">Don’t connect to events in <code class="language-plaintext highlighter-rouge">start()</code>, use <code class="language-plaintext highlighter-rouge">preStart()</code></h3>

<p>To avoid race conditions, make sure you run your <code class="language-plaintext highlighter-rouge">connect*Event()</code> code in <code class="language-plaintext highlighter-rouge">preStart()</code> rather than <code class="language-plaintext highlighter-rouge">start()</code>. As, at world start, the system runs all of the <code class="language-plaintext highlighter-rouge">preStart()</code> calls in all Components before <code class="language-plaintext highlighter-rouge">start()</code> is called in any Component, you will be sure that all event listeners are registered before anyone tries to send an event to them.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">someEvent</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">event received</span><span class="dl">'</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

<span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">connectLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">someEvent</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">event received</span><span class="dl">'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="never-send-events-in-prestart-use-start-instead">Never send events in <code class="language-plaintext highlighter-rouge">preStart()</code>, use <code class="language-plaintext highlighter-rouge">start()</code> instead</h3>

<p>Similar to the above, never call <code class="language-plaintext highlighter-rouge">send*Event()</code> in <code class="language-plaintext highlighter-rouge">preStart()</code>, as some Components may not have set up event listeners yet and will miss the event if you send it too early.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

<span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">sendLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">someEvent</span><span class="p">,</span> <span class="p">{});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">override</span> <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">sendLocalEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">someEvent</span><span class="p">,</span> <span class="p">{});</span>
<span class="p">}</span>

<span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="define-events-once-and-export-to-all-users">Define Events once and export to all users</h3>

<p>Do not re-declare the same <code class="language-plaintext highlighter-rouge">CodeBlockEvents</code>, <code class="language-plaintext highlighter-rouge">LocalEvents</code>, or <code class="language-plaintext highlighter-rouge">NetworkEvents</code> in different places in the code. Have one ‘home’ for each event declaration, export it from there to other users, who should import that definition. This way, you can be <em>sure</em> that everyone agrees on the string name of the event, the type of the event (CodeBlock, Network, or Local), and, most importantly, the parameters of the event. This is especially important if you are changing the event definitions during the development process.</p>

<p>One common pattern is to have a single Events.ts module and dump <em>all</em> the events for the entire world in there as exported objects.</p>

<p>Events.ts</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">LocalEvent</span><span class="p">,</span> <span class="nx">NetworkEvent</span><span class="p">,</span> <span class="nx">CodeBlockEvent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">horizon/core</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">MyEvents</span> <span class="o">=</span> <span class="p">{</span>
 <span class="na">event1</span><span class="p">:</span> <span class="k">new</span> <span class="nx">LocalEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">event1</span><span class="dl">"</span><span class="p">),</span>
 <span class="na">event2</span><span class="p">:</span> <span class="k">new</span> <span class="nx">NetworkEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">event2</span><span class="dl">"</span><span class="p">),</span>
 <span class="na">event3</span><span class="p">:</span> <span class="k">new</span> <span class="nx">CodeBlockEvent</span><span class="p">(</span><span class="dl">"</span><span class="s2">event3</span><span class="dl">"</span><span class="p">,</span> <span class="p">[]),</span>
<span class="p">};</span>
</code></pre></div></div>

<p>MyComponent.ts</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">horizon/core</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MyEvents</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">Events</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">MyComponent</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">MyComponent</span><span class="o">&gt;</span> <span class="p">{</span>

   <span class="nx">preStart</span><span class="p">()</span> <span class="p">{</span>
       <span class="k">this</span><span class="p">.</span><span class="nx">connectCodeBlockEvent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">entity</span><span class="p">,</span> <span class="nx">MyEvents</span><span class="p">.</span><span class="nx">event3</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">});</span>
   <span class="p">}</span>

   <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Another approach is to have each event in the module of the primary ‘listener’ and have it export the event so that all senders can import the definition.</p>

<p>A note for people using the Horizon Hub ‘waffle-converter’: due to the fact that it doesn’t have ‘multi-file’ knowledge of your system, it places all <code class="language-plaintext highlighter-rouge">CodeBlockEvent</code> definitions locally in each module where they are sent or received. You will need to refactor this code to ensure there is only one definition of each event in your world by moving the definitions to a common location.</p>

<h3 id="prefer-networkevents-and-localevents-over-codeblockevents">Prefer NetworkEvents and LocalEvents over CodeBlockEvents</h3>

<p>While CodeBlockEvents continue to work in TypeScript, they are less efficient to send and receive, and have much more limited payload types than either NetworkEvents or LocalEvents.</p>

<p>NetworkEvents can send structured data that cannot be sent in CodeBlockEvents, and, like CodeBlockEvents, can be sent across the network between different script owners.</p>

<p>LocalEvents can only be sent to the same script owner, but, unlike NetworkEvents, can send practically <em>anything</em> as a payload.</p>

<p>Note that NetworkEvents arrive, at earliest, in the next frame, while LocalEvents are sent immediately and are more like function calls.</p>

<h3 id="always-quote-asset-ids-as-strings">Always quote asset ids as strings</h3>

<p>When using asset ids to construct Asset objects in code, always treat them as strings, never as numbers. The id space of assets is 2^64, but the maximum integer for a number is 2^56, so there are some asset ids that can’t be represented as numbers.</p>

<p>✅ Do this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myAsset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Asset</span><span class="p">(</span><span class="nx">BigInt</span><span class="p">(</span><span class="dl">"</span><span class="s2">123456678901234</span><span class="dl">"</span><span class="p">))</span>
</code></pre></div></div>

<p>🚫 Not this:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myAsset</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Asset</span><span class="p">(</span><span class="nx">Bigint</span><span class="p">(</span><span class="mi">12345678901234</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="never-subclass-a-horizon-worlds-api-class-other-than-component-or-uicomponent">Never subclass a Horizon Worlds API class other than <code class="language-plaintext highlighter-rouge">Component</code> or <code class="language-plaintext highlighter-rouge">UIComponent</code></h3>

<p>As a general rule, don’t subclass classes that are not marked <code class="language-plaintext highlighter-rouge">abstract</code>, as they may not be designed to work properly as subclasses. An abstract class <em>must</em> be subclassed to be instantiated, so generally it is safe to do so to implement the abstracted parts of the class definition. Both <code class="language-plaintext highlighter-rouge">Component</code> and <code class="language-plaintext highlighter-rouge">UIComponent</code> are abstract classes (Component has an <code class="language-plaintext highlighter-rouge">abstract start()</code> method, and UIComponent has an <code class="language-plaintext highlighter-rouge">abstract initializeUI()</code> method).</p>

<p>So, do not subclass <code class="language-plaintext highlighter-rouge">Vec3</code>, <code class="language-plaintext highlighter-rouge">Quaternion</code>, <code class="language-plaintext highlighter-rouge">Color</code>, <code class="language-plaintext highlighter-rouge">Asset</code>, <code class="language-plaintext highlighter-rouge">Entity</code>, etc. as the API is probably not set up to handle your subclassed versions of these classes correctly in all circumstances or for all future releases.</p>

<h1 id="extended-recommendations">Extended Recommendations</h1>

<h2 id="whitespace-1">Whitespace</h2>

<h3 id="use-whitespace-liberally-there-is-no-fee-for-use">Use whitespace liberally (there is no fee for use!)</h3>

<p>Insert a space after all keywords (<code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">while</code>, <code class="language-plaintext highlighter-rouge">for</code>). Insert a space after commas. Insert spaces around binary operator (<code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">/</code>). Use newlines to separate logical blocks of code.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">callFunction</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">i</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">20</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">notDone</span><span class="p">())</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">check</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="nx">doCheck</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">check</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">globalError</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">status is:</span><span class="dl">"</span><span class="p">,</span><span class="nx">status</span><span class="p">)</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="o">++</span><span class="p">){</span>
  <span class="nx">callFunction</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span><span class="nx">i</span><span class="o">/</span><span class="mi">10</span><span class="o">+</span><span class="mi">20</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">while</span><span class="p">(</span><span class="nx">notDone</span><span class="p">()){</span>
  <span class="kd">const</span> <span class="nx">check</span><span class="p">:</span><span class="nx">boolean</span><span class="o">=</span><span class="nx">doCheck</span><span class="p">();</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">check</span><span class="o">&amp;&amp;!</span><span class="nx">globalError</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">status is:</span><span class="dl">"</span><span class="p">,</span><span class="nx">status</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="put-control-flow-blocks-on-their-own-line">Put control flow blocks on their own line</h3>

<p>Always put sub-blocks (such as with <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">else</code>, <code class="language-plaintext highlighter-rouge">for</code>, etc) on the next line. Do not write single line <code class="language-plaintext highlighter-rouge">if</code> statements.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">doAction</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this::</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="nx">doAction</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="use-semicolons-to-end-statements">Use semicolons to end statements</h3>

<p>Semicolons at the end of statements are semi-optional in typescript. Automatic Semicolon Insertion (ASI) by the compiler <em>usually</em> avoids the need to add them explicitly. However, sometimes they are needed to either make the code compile or avoid a subtle bug. Thus, it’s generally best to get in the habit of always including them to avoid problems.</p>

<h2 id="language-features-1">Language Features</h2>

<h3 id="use-const-rather-than-let-on-localglobal-variables-whenever-possible">Use <code class="language-plaintext highlighter-rouge">const</code> rather than let on local/global variables whenever possible</h3>

<p>When declaring variables use <code class="language-plaintext highlighter-rouge">const</code> unless you later determine that you need to edit the value. Using <code class="language-plaintext highlighter-rouge">const</code> allows other readers of your code to know that the value can never change, so they don’t need to go hunt for places where it might change its value after its initial declaration.</p>

<h3 id="use-readonly-on-class-variables-whenever-possible">Use <code class="language-plaintext highlighter-rouge">readonly</code> on class variables whenever possible</h3>

<p>Similar to <code class="language-plaintext highlighter-rouge">const</code> for local/global variables, this information makes it clear that the value can never change, making your code more understandable.</p>

<h3 id="mark-class-variables-and-methods-private-or-protected-whenever-possible">Mark class variables and methods <code class="language-plaintext highlighter-rouge">private</code> (or <code class="language-plaintext highlighter-rouge">protected</code>) whenever possible</h3>

<p>When you mark variables <code class="language-plaintext highlighter-rouge">private</code> (or <code class="language-plaintext highlighter-rouge">protected</code>), it is an indication that nothing outside of this class (or its subclasses) can alter these values. This makes it easier to understand your code, and prevents certain kinds of bugs due to ‘misuse’ of the internal state of your class by other code.</p>

<h3 id="use-parameter-properties-on-constructor-arguments">Use parameter properties on constructor arguments</h3>

<p>Rather than writing boilerplate code to plumb through an assignment from a constructor argument to a <code class="language-plaintext highlighter-rouge">readonly</code>/<code class="language-plaintext highlighter-rouge">private</code>/<code class="language-plaintext highlighter-rouge">protected</code> member variable, use parameter properties on the constructor.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">bar</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="k">readonly</span> <span class="k">protected</span> <span class="nx">foo</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="k">public</span> <span class="nx">naf</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">bar</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">readonly</span> <span class="k">protected</span> <span class="nx">foo</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">naf</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">bar</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">foo</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">naf</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="nx">bar</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">naf</span> <span class="o">=</span> <span class="nx">naf</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="use-override-on-all-class-methods-that-are-being-overridden-especially-start-and-prestart">Use <code class="language-plaintext highlighter-rouge">override</code> on all class methods that are being overridden, especially <code class="language-plaintext highlighter-rouge">start()</code> and <code class="language-plaintext highlighter-rouge">preStart()</code></h3>

<p>If you explicitly mark a method with the <code class="language-plaintext highlighter-rouge">override</code> keyword, the compiler will guarantee that you are actually overriding a function from the base class. This can catch common spelling errors such as typing <code class="language-plaintext highlighter-rouge">prestart()</code> rather than <code class="language-plaintext highlighter-rouge">preStart()</code>.</p>

<h3 id="use-undefined-rather-than-null">Use <code class="language-plaintext highlighter-rouge">undefined</code> rather than <code class="language-plaintext highlighter-rouge">null</code></h3>

<p>TypeScript, unfortunately, has two values that are ‘nullish’. They both are ‘falsy’, but they are not equal to one another. Try to use <code class="language-plaintext highlighter-rouge">undefined</code>, whenever possible, as the value for things that have no value set on them. The <code class="language-plaintext highlighter-rouge">undefined</code> value is what the TypeScript api returns for things like accessing an unset index on an array, or fetching an un-stored key from a Map, or for an optional argument to a method that has not been supplied.</p>

<p>The only time to use <code class="language-plaintext highlighter-rouge">null</code> is when you <em>really</em> need to distinguish between ‘this value has not been set’ (<code class="language-plaintext highlighter-rouge">undefined</code>) and ‘this value has been explicitly set to no value’ (<code class="language-plaintext highlighter-rouge">null</code>).</p>

<p>Meta has chosen to use <code class="language-plaintext highlighter-rouge">null</code> in a bunch of Horizon Worlds apis where they probably should have used <code class="language-plaintext highlighter-rouge">undefined</code>. So, you will need to adapt to that.</p>

<h3 id="minimize-escape-characters-in-strings">Minimize escape characters in strings</h3>

<p>When writing non-interpolated string values, use the appropriate quotation marks to avoid unnecessary escape characters. I.e. if your string has apostrophes, use double quotes for the string. If your string has embedded double quotes, use an apostrophe for the string.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">str1</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">This string "has quotes" and stuff</span><span class="dl">'</span>
<span class="kd">const</span> <span class="nx">str2</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">This string 'has apostrophes' and stuff</span><span class="dl">"</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">str1</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">This string </span><span class="se">\"</span><span class="s2">has quotes</span><span class="se">\"</span><span class="s2"> and stuff</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">str2</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">This string </span><span class="se">\'</span><span class="s1">has apostrophes</span><span class="se">\'</span><span class="s1"> and stuff</span><span class="dl">'</span>
</code></pre></div></div>

<h3 id="use-interpolated-strings-only-when-there-is-interpolation">Use interpolated strings only when there is interpolation</h3>

<p>Don’t use backticks for quoting strings unless you are actually interpolating variable values into the string.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">3</span>
<span class="kd">const</span> <span class="nx">str1</span> <span class="o">=</span> <span class="s2">`This string interpolates </span><span class="p">${</span><span class="nx">num</span><span class="p">}</span><span class="s2"> a number`</span>
<span class="kd">const</span> <span class="nx">str2</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">This string does not</span><span class="dl">'</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">str3</span> <span class="o">=</span> <span class="s2">`This string has no interpolation`</span>
</code></pre></div></div>

<h3 id="use-tuples-rather-than-returning-pair-objects">Use tuples rather than returning pair objects</h3>

<p>If you need to return two values from a function, return a tuple <code class="language-plaintext highlighter-rouge">[a, b]</code> rather than creating a pair object <code class="language-plaintext highlighter-rouge">{first: a, second: b}</code>, and then use destructuring to extract the parts of the tuple at the call site.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">splitInHalf</span><span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="p">[</span><span class="kr">string</span><span class="p">,</span> <span class="kr">string</span><span class="p">]</span> <span class="p">{</span>
  <span class="p">...</span> <span class="nx">code</span> <span class="nx">to</span> <span class="nx">split</span> <span class="kr">string</span> <span class="nx">into</span> <span class="nx">x</span> <span class="nx">and</span> <span class="nx">y</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="p">[</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">]</span> <span class="o">=</span> <span class="nx">splitInHalf</span><span class="p">(</span><span class="dl">'</span><span class="s1">my string</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">Pair</span> <span class="p">{</span>
  <span class="nl">first</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">second</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">splitInHalf</span><span class="p">(</span><span class="nx">input</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">Pair</span> <span class="p">{</span>
  <span class="p">..</span> <span class="nx">code</span> <span class="nx">to</span> <span class="nx">split</span> <span class="kr">string</span> <span class="nx">into</span> <span class="nx">x</span> <span class="nx">and</span> <span class="nx">y</span>
  <span class="k">return</span> <span class="p">{</span><span class="na">first</span><span class="p">:</span> <span class="nx">x</span><span class="p">,</span> <span class="na">second</span><span class="p">:</span> <span class="nx">y</span><span class="p">};</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">value</span><span class="p">:</span> <span class="nx">Pair</span> <span class="o">=</span> <span class="nx">splitInHalf</span><span class="p">(</span><span class="dl">'</span><span class="s1">my string</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">first</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">second</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="do-not-assign-function-declarations-to-variables-or-pass-them-as-arguments">Do not assign function declarations to variables or pass them as arguments</h3>

<p>Just use arrow functions.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">:</span> <span class="nx">bool</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="nx">stuff</span> <span class="p">...</span> <span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">myFunction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg1</span><span class="p">:</span> <span class="nx">bool</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="nx">stuff</span> <span class="p">...}</span>
</code></pre></div></div>

<h3 id="do-not-assign-arrow-functions-to-class-member-variables">Do not assign arrow functions to class member variables</h3>

<p>Instead, just write a method on the class.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
  <span class="nx">method</span><span class="p">(</span><span class="nx">arg1</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">...</span> <span class="nx">body</span> <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
  <span class="nx">method</span> <span class="o">=</span> <span class="p">(</span><span class="nx">arg1</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="p">...</span> <span class="nx">body</span> <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="omit-obvious-types-when-initializing-variables-at-declaration">Omit obvious types when initializing variables at declaration</h3>

<p>If you are initializing a variable to a number of boolean or specific class or whatever, you do not need to also put a type on the variable. Also, return types for functions that have obvious outputs can be omitted. Only do this when it is 100% unambiguous, tho. If in doubt, put the type.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">3</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">foo</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">3</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">():</span> <span class="nx">boolean</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="for-simple-arrays-of-type-t-use-t-and-readonly-t-rather-than-arrayt-or-readonlyarrayt">For simple arrays of type <code class="language-plaintext highlighter-rouge">T</code>, use <code class="language-plaintext highlighter-rouge">T[]</code> and <code class="language-plaintext highlighter-rouge">readonly T[]</code> rather than <code class="language-plaintext highlighter-rouge">Array&lt;T&gt;</code> or <code class="language-plaintext highlighter-rouge">ReadonlyArray&lt;T&gt;</code></h3>

<p>It is easier to read the <code class="language-plaintext highlighter-rouge">T[]</code> form, so prefer that, even for non readonly multidimensional arrays (e.g. <code class="language-plaintext highlighter-rouge">T[][][]</code>). Only revert to the <code class="language-plaintext highlighter-rouge">Array&lt;&gt;</code> form if the type of the array is a compound type itself.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myStringArray</span><span class="p">:</span> <span class="kr">string</span><span class="p">[];</span>
<span class="kd">let</span> <span class="nx">myMatrix</span><span class="p">:</span> <span class="kr">number</span><span class="p">[][];</span>
<span class="kd">let</span> <span class="nx">myReadonlyMatrix</span><span class="p">:</span> <span class="nx">ReadonlyArray</span><span class="o">&lt;</span><span class="kr">number</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myArrayOfStringOrNumber</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">myStringArray</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myMatrix</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nb">Array</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myReadonlyMatrix</span><span class="p">:</span> <span class="k">readonly</span> <span class="kr">number</span><span class="p">[][];</span>
<span class="kd">let</span> <span class="nx">myArrayOfStringOrNumber</span><span class="p">:</span> <span class="p">(</span><span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">)[];</span>
</code></pre></div></div>

<h3 id="use-foreach-map-reduce-and-filter-instead-of-writing-for-loops">Use <code class="language-plaintext highlighter-rouge">forEach()</code>, <code class="language-plaintext highlighter-rouge">map()</code>, <code class="language-plaintext highlighter-rouge">reduce()</code>, and <code class="language-plaintext highlighter-rouge">filter()</code> instead of writing <code class="language-plaintext highlighter-rouge">for()</code> loops</h3>

<p>These functional programming constructs are easier to understand and less prone to error than <code class="language-plaintext highlighter-rouge">for</code> loops. However, they are somewhat slower, so don’t use them in critical performance areas. However, such critical performance areas are unlikely to exist in most Horizon Worlds creations.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">myArray</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">entry</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">doSomething</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">newArray</span> <span class="o">=</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">entry</span> <span class="o">=&gt;</span> <span class="nx">alterEntry</span><span class="p">(</span><span class="nx">entry</span><span class="p">))</span>

<span class="kd">const</span> <span class="nx">filteredArray</span> <span class="o">=</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">entry</span> <span class="o">=&gt;</span> <span class="nx">isWantedEntry</span><span class="p">(</span><span class="nx">entry</span><span class="p">))</span>

<span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">acc</span> <span class="o">+</span> <span class="nx">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">doSomething</span><span class="p">(</span><span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">newArray</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">newArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">alterEntry</span><span class="p">(</span><span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">filteredArray</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isWantedEntry</span><span class="p">(</span><span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">filteredArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">myArray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">sum</span> <span class="o">=</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">myArray</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="avoid-using-methods-on-the-object-class">Avoid using methods on the Object class</h3>

<p>If possible, do not use reflection methods like <code class="language-plaintext highlighter-rouge">Object.prototype.hasOwnProperty()</code>, <code class="language-plaintext highlighter-rouge">Object.keys()</code>, <code class="language-plaintext highlighter-rouge">Object.values()</code>, <code class="language-plaintext highlighter-rouge">Object.entries()</code>, etc. These are not strongly typed and can cause runtime errors if you are not absolutely sure what you’re doing.</p>

<h3 id="prefer-the-mapk-v-type-rather-than-using-object-or-recordk-v-types-for-keyvalue-mappings">Prefer the <code class="language-plaintext highlighter-rouge">Map&lt;K, V&gt;</code> type rather than using <code class="language-plaintext highlighter-rouge">object</code> or <code class="language-plaintext highlighter-rouge">Record&lt;K, V&gt;</code> types for key/value mappings</h3>

<p>The <code class="language-plaintext highlighter-rouge">Map&lt;K, V&gt;</code> type gives you additional functionality over <code class="language-plaintext highlighter-rouge">object</code> types, including the use of any type as a key, the <code class="language-plaintext highlighter-rouge">has()</code> method, the <code class="language-plaintext highlighter-rouge">size</code> property, and the ability to iterate over entries in insertion order using <code class="language-plaintext highlighter-rouge">for..of</code> loops.</p>

<p>A <code class="language-plaintext highlighter-rouge">Record&lt;K, V&gt;</code> is a more strongly typed <code class="language-plaintext highlighter-rouge">object</code>, which can be useful if you <em>have</em> to work with <code class="language-plaintext highlighter-rouge">object</code> types rather than <code class="language-plaintext highlighter-rouge">Map</code>s for some reason.</p>

<h3 id="use-the-spread-operator--to-concatenate-arrays-and-objects">Use the spread operator <code class="language-plaintext highlighter-rouge">…</code> to concatenate arrays and objects</h3>

<p>When combining a number of arrays together into a new array, use the <code class="language-plaintext highlighter-rouge">...</code> operator to spread the arrays or objects into a new array/object literal rather than using <code class="language-plaintext highlighter-rouge">Array.concat()</code> or <code class="language-plaintext highlighter-rouge">Object.assign()</code> to combine them together.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">View</span><span class="p">({</span>
  <span class="na">style</span><span class="p">:</span> <span class="p">{</span>
    <span class="p">...</span><span class="nx">defaultViewStyle</span><span class="p">,</span>
    <span class="na">margin</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">View</span><span class="p">({</span>
  <span class="na">style</span><span class="p">:</span> <span class="nx">defaultViewStyle</span><span class="p">.</span><span class="nx">concat</span><span class="p">({</span>
    <span class="na">margin</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> 
    <span class="na">padding</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="export-only-whats-needed">Export only what’s needed</h3>

<p>Only export type definitions, classes, and variables that actually need to be imported elsewhere. Default to not exporting things until needed. Only use named exports, do not do <code class="language-plaintext highlighter-rouge">default</code> exports.</p>

<h3 id="consider-destructured-imports">Consider destructured imports</h3>

<p>Rather than doing <code class="language-plaintext highlighter-rouge">import * as hz from 'horizon/core'</code>, import specific types/classes that you need, i.e. <code class="language-plaintext highlighter-rouge">import { Component } from 'horizon/core'</code>. Only importing what you need makes it clear to other people what the code in your file is doing, and is slightly better for compiler performance and optimization tools. VSCode will help you auto-manage your destructured import list. If you need to rename something to avoid a collision, you can use <code class="language-plaintext highlighter-rouge">as</code> to rename the imported symbol in your file.</p>

<h2 id="naming-1">Naming</h2>

<h3 id="pascalcase-for-types-camelcase-for-variablesfunctions-capitalized_snake_case-for-global-constants">PascalCase for types, camelCase for variables/functions, CAPITALIZED_SNAKE_CASE for global constants</h3>

<p>Classes and type declarations should use PascalCase (each word capitalized). Variable and function names should use camelCase (first word lower case, remaining words capitalized). Global constants should use CAPITALIZED_SNAKE_CASE (each word capitalized, separated by an underscore). Do not use snake_case mixed with PascalCase, or PascalCase for variables/functions. It should be immediately identifiable whether something is a type or a variable/function based on the naming.</p>

<p>Examples:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">DEFAULT_POINTS</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">UserData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">totalPoints</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">MySpecialClass</span> <span class="p">{</span>
  <span class="nx">addPoints</span><span class="p">(</span><span class="nx">userData</span><span class="p">:</span> <span class="nx">UserData</span><span class="p">,</span> <span class="nx">newPoints</span><span class="p">?:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">userData</span><span class="p">.</span><span class="nx">totalPoints</span> <span class="o">+=</span> <span class="nx">newPoints</span> <span class="o">??</span> <span class="nx">DEFAULT_POINTS</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="use-descriptive-names">Use descriptive names</h3>

<p>Name your variables, functions, classes, etc descriptively. Avoid single letter or very short variable names in all but the most simplistic cases. You want to write ‘really obvious code’ so that someone else or a later version of you will be able to read it and understand what its doing just by the names of things.</p>

<h3 id="dont-use-_-underline-prefix-for-private-member-variables">Don’t use <code class="language-plaintext highlighter-rouge">_</code> (underline) prefix for private member variables</h3>

<p>It’s really not necessary, and makes the code harder to read. Most of your class member variables should be private, anyway.</p>

<h2 id="layout">Layout</h2>

<h3 id="all-imports-at-top-of-file">All imports at top of file</h3>

<p>Do not intersperse import statements throughout your file. Put them at the top. Also, keep them organized in alphabetical order and remove unnecessary import declarations. The VSCode ‘Organize Imports’ function can do this for you. Run it every so often to clean them up.</p>

<h3 id="organize-files-with-type-definitions-first-then-globals-then-classes">Organize files with type definitions first, then globals, then classes</h3>

<p>Having a standardized organization for where different sorts of things are in a file will make orienting people to your code easier when they first encounter it. Put type definitions first after imports. Then declare any global constants or variables used in the file. Then declare your classes. Register each of your Components immediately after their declaration.</p>

<h3 id="organize-classes-with-statics-then-variables-then-methods">Organize classes with statics, then variables, then methods</h3>

<p>Having a standardized organization for where different things are in your class will make orienting people to your code easier when they first encounter it. Put static variables first (e.g. propsDefinition), followed by any static method. Then put instance variables, and finally put instance methods.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">PropTypes</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">horizon/core</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">MyData</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">info</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
   <span class="na">price</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">DEFAULT_PRICE</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">MyComponent</span> <span class="kd">extends</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="k">typeof</span> <span class="nx">MyComponent</span><span class="o">&gt;</span> <span class="p">{</span>
   <span class="k">static</span> <span class="nx">propsDefinition</span> <span class="o">=</span> <span class="p">{</span>
       <span class="na">prop1</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nb">String</span><span class="p">,</span> <span class="na">default</span><span class="p">:</span> <span class="dl">"</span><span class="s2">default value</span><span class="dl">"</span> <span class="p">},</span>
   <span class="p">};</span>

   <span class="k">static</span> <span class="na">dataMap</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">MyData</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

   <span class="k">static</span> <span class="nx">addData</span><span class="p">(</span><span class="na">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="nx">MyData</span><span class="p">)</span> <span class="p">{</span>
       <span class="nx">MyComponent</span><span class="p">.</span><span class="nx">dataMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="k">readonly</span> <span class="nx">myKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">key</span><span class="dl">"</span><span class="p">;</span>
   <span class="nl">myData</span><span class="p">:</span> <span class="nx">MyData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">info</span><span class="p">:</span> <span class="dl">"</span><span class="s2">info</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="nx">DEFAULT_PRICE</span> <span class="p">};</span>

   <span class="nx">override</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">MyComponent started</span><span class="dl">"</span><span class="p">);</span>
       <span class="nx">MyComponent</span><span class="p">.</span><span class="nx">addData</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">myKey</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">myData</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="nx">myFunction</span><span class="p">()</span> <span class="p">{</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">MyComponent function called</span><span class="dl">"</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="general">General</h2>

<h3 id="avoid-clever-code">Avoid clever code</h3>

<p>Like using descriptive names, you want to write ‘really obvious code’. Don’t use obscure language features in ‘clever ways’ or try to condense complex code into a small space such that its purpose is inscrutable at first glance. Do not try to ‘show off’ to other people by writing very convoluted code when more straightforward would do. If there are reasons to do something ‘clever’ or use esoteric language features, make sure you add <em>copious</em> comments describing what you are doing and, more importantly, why.</p>

<h3 id="comment-the-important-things">Comment the important things</h3>

<p>A ‘future you’ will thank yourself if you write down what you were thinking when you wrote your code! However, do not comment pedantically, and make sure you have <a href="#use-descriptive-names">used descriptive names</a> for your variables and functions, as that can make extra comments unnecessary. Only comment the <em>important</em> things, and comment things that the VSCode hover popups will pick up, such as documentation comments on functions describing its effects, parameters, and return values.</p>

<h3 id="write-tsdoc-comments-on-functions-and-on-important-variablesclasses">Write TSDoc comments on functions and on important variables/classes</h3>

<p>When you use the TSDoc comment format, the VSCode editor will be able to pick them up and display them as popups when you hover over the identifiers usage elsewhere. You do not need to include types in your comments, as they are already in the code.</p>

<p>Comments on functions and methods should be of the form:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Description of what myFunction does
 * @param paramName parameter purpose
 * @return information about return value
 */</span>
<span class="kd">function</span> <span class="nx">myFunction</span><span class="p">(</span><span class="nx">paramName</span><span class="p">:</span> <span class="kd">type</span><span class="p">):</span> <span class="nx">returnValue</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<p>On variables or classes, it should just be a block of descriptive text</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Information about myVariable
 */</span>
<span class="kd">const</span> <span class="nx">myVariable</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">3</span>

<span class="cm">/**
 * Information about MyClass
 */</span>
<span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="separate-unrelated-components-into-separate-files">Separate unrelated Components into separate files</h3>

<p>If you are writing code for a bunch of Components that are closely related, sometimes it is useful to put them all in the same file for organizational reasons or so that they can share some types or global variables that don’t need to be exported.</p>

<p>However, avoid writing really long files. Also, do not put unrelated Components in the same file, as it makes code organization less clear, encourages accidental and unnecessary coupling between Components, and reduces reusability of your code.</p>

<h3 id="use-line-comments-for-internal-implementation-details">Use line comments for internal implementation details</h3>

<p>A line comment starts with two slashes // and continues to the end of the current line. Use these inline in your code to describe interesting details of the algorithm or other important information. Prefer multiple lines of single line comments using // to multi-line block comments using /* */.</p>

<p>✅ Do this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
    
  <span class="nx">someMethod</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">someCode</span><span class="p">();</span>
    <span class="c1">// someDisabledCode1();</span>
    <span class="c1">// someDisabeldCode2();</span>
  <span class="p">}</span>

  <span class="c1">// someDisabledMethod() {</span>
  <span class="c1">//   thing1();</span>
  <span class="c1">//   thing2();</span>
  <span class="c1">//   thing3();</span>
  <span class="c1">// }</span>

<span class="p">}</span>
</code></pre></div></div>

<p>🚫 Not this:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">MyClass</span> <span class="p">{</span>
    
  <span class="nx">someMethod</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">someCode</span><span class="p">();</span>
    <span class="cm">/*
    someDisabledCode1();
    someDisabeldCode2();
    */</span>
  <span class="p">}</span>
<span class="cm">/*
  someDisabledMethod() {
    thing1();
    thing2();
    thing3();
  }
*/</span>

<span class="p">}</span>
</code></pre></div></div>

<h1 id="tldr-plugins">TL;DR Plugins</h1>

<h2 id="coding-conventions">Coding Conventions</h2>

<p>Coding conventions discussions can be contentious, with ‘religious wars’ about where spaces go, when to use newlines, how many statements can go on a line, etc. One way to avoid those pitfalls is to just leave it to someone else to argue about what is the ‘best’ way to format code, and just accept whatever they decide. Additionally, it requires the expending of extra mental energy to <em>apply</em> the conventions while you are typing your code, so having something do that automatically frees up brain cycles for something else.</p>

<h3 id="prettier">Prettier</h3>

<p>Fortunately for us, there is <a href="https://prettier.io">Prettier</a>, an industry leading coding conventions enforcer plugin that has made the decisions for us, and will apply them automatically. They have a good summary on <a href="https://prettier.io/docs/en/why-prettier">why you should use Prettier</a>. In particular, they have an <a href="https://prettier.io/docs/en/option-philosophy">opinionated philosophy</a> on code formatting, so there are fairly few options to configure how it works. It’s best to just leave their options on their defaults, and accept that they have thought long and hard about <em>why</em> their way is the best way.</p>

<h4 id="installation">Installation</h4>

<p>To install prettier in VSCode, simply open VSCode, go to the Extensions tab on the right sidebar (the three cubes with the fourth cube offset), search for “Prettier”, click on “Prettier - Code formatter”, and click Install.</p>

<p><img src="typescript-conventions-best-practices-images/image1.png" alt="" /></p>

<p>For other editors, check out the <a href="https://prettier.io/docs/en/editors">Editor Integrations</a> page.</p>

<h4 id="configuration">Configuration</h4>

<p>The most important configuration setting to make is to ensure that Prettier is used as the default formatter for typescript files. If you don’t currently have a formatter configured, and you are in a typescript file, and run Format Document (Shift + Alt + F), you will get a popup asking you to Configure a default formatter. Make sure you choose “Prettier - Code Formatter”.</p>

<p>If you don’t get a popup when doing Format Document for the first time, it means you already have a typescript formatter configured. You will want to change that to Prettier by going to File -&gt; Preferences -&gt; Settings, typing <code class="language-plaintext highlighter-rouge">@id:editor.defaultFormatter @lang:typescript</code> in the search bar, and switching the Default Formatter to ‘Prettier -&gt; Code Formatter’.</p>

<p><img src="typescript-conventions-best-practices-images/image2.png" alt="" /></p>

<p>By default, Prettier won’t format anything until you tell it to via Format Document or Format Selection. However, you can also configure VSCode to Format On Save, On Paste, and On Type. Note that if you have File: Auto Save set to <code class="language-plaintext highlighter-rouge">afterDelay</code>, then Format On Save will only work on an explicit save.</p>

<p>To find the formatting options in File-&gt;Preferences-&gt;Settings, search for <code class="language-plaintext highlighter-rouge">editor:format</code> and tick on whichever options you prefer (below shows all of On Paste, On Save, and On Type enabled).</p>

<p><img src="typescript-conventions-best-practices-images/image3.png" alt="" /></p>

<p>There are a number of other minor settings you can adjust, listed on the <a href="https://prettier.io/docs/en/options">options</a> page and via the ‘gear’ icon on the plugin, such as Tab Width (default 2), and Print Width (default 80). Those values are a bit of an anachronism from when people didn’t have very wide monitors. However, if you make customizations, make sure you put a <a href="https://prettier.io/docs/en/configuration">configuration file</a> like <code class="language-plaintext highlighter-rouge">.prettierrc</code> or <code class="language-plaintext highlighter-rouge">.editorconfig</code> in the scripts directory of <em>each</em> of your horizon world projects so that others using your code will pick up the same settings. Thus, it’s best to just not change them at all.</p>

<p>If there are particular files that you need Prettier to ignore, you can add them to the <code class="language-plaintext highlighter-rouge">.prettierignore</code> file (in the <a href="https://www.w3schools.com/git/git_ignore.asp">same format as .gitignore</a>).</p>

<h4 id="usage">Usage</h4>

<p>If you have precious but non-standard formatting somewhere in your file that you want to preserve, you can precede that block of code with a comment of the following form:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// prettier-ignore</span>
</code></pre></div></div>

<p>This will prevent Prettier from reformatting until the syntactically next statement is reached (which can be one line or many lines, depending on the type of statement that follows the comment).</p>

<p>##</p>

<h2 id="best-practices">Best Practices</h2>

<p>There are a variety of language features that are often misused, or just bad to use at all. These are more complex ‘code quality’ issues rather than formatting conventions handled by plugins like Prettier. The class of plugins that check for these code quality issues are typically called ‘linters’, as they remove <a href="https://en.wikipedia.org/wiki/Lint_(software)#History">‘unwanted bits of fluff from your code’</a> (i.e. the ‘lint’). Linters are <em>very</em> powerful tools and often have a bewildering number of rules that can be configured. This is a more advanced helper than coding convention formatters like Prettier, but will identify subtle programming errors in your code and make your code more robust and bug free. Reading the web pages associated with any linter errors found in your code will teach you how to be a better typescript coder.</p>

<h3 id="typescript-eslint">typescript-eslint</h3>

<p>The ESlint linter has been used for years to check Javascript/ECMAscript code, and now has a variant called <a href="https://typescript-eslint.io/">typescript-eslint</a> specifically tailored for Typescript that uses typing information provided by the typescript compiler to enhance its ability to detect coding errors. (note: there is an <a href="https://typescript-eslint.io/users/what-about-tslint">older TSLint project that has been deprecated</a>. Use typescript-eslint instead). (Also, note that while ESLint can do coding convention formatting as well, they <a href="https://typescript-eslint.io/users/what-about-formatting">recommend leaving that to Prettier</a>).</p>

<h4 id="installation-1">Installation</h4>

<p>Installation of typescript-eslint is significantly more complicated than installation of Prettier, which is just a VSCode plugin. Installing the ESLint plugin within VSCode is part of the process, but you will need to also have a minimal Node.js installation, and use npm (or yarn or pnpm) to locally install and configure ESLint into <em>each</em> project you want to use it in using command line tools. You will need to know the directory of your projects scripts directory, which you can easily get from both the Desktop Editor and VSCode.</p>

<ul>
  <li>
    <p>Desktop Editor - Open Scripts Folder in Explorer<br />
<img src="typescript-conventions-best-practices-images/image4.png" alt="" /><br />
Go to the scripts menu, press on the triple dot menu, and select Open Scripts Folder in Explorer (note it actually opens the folder _above_ the <code class="language-plaintext highlighter-rouge">scripts</code> folder, you will need to click on <code class="language-plaintext highlighter-rouge">scripts</code> once the window opens to go into that folder)</p>
  </li>
  <li>
    <p>VSCode - Reveal in File Explorer<br />
<img src="typescript-conventions-best-practices-images/image5.png" alt="" /><br />
Right click on your <code class="language-plaintext highlighter-rouge">tsconfig.json</code> file and select Reveal in File Explorer</p>
  </li>
</ul>

<p>In the File Explorer, you can then click past the <em>end</em> of the location bar text (don’t click on any of the text), and copy the path to the <code class="language-plaintext highlighter-rouge">scripts</code> directory to the clipboard for use with your command line terminal of choice.</p>

<p><img src="typescript-conventions-best-practices-images/image6.png" alt="" /> It should be something like <code class="language-plaintext highlighter-rouge">C:\Users\live\AppData\LocalLow\Meta\Horizon Worlds\eslint test_10160832935606146\scripts</code></p>

<h5 id="vscode-eslint-plugin-one-time">VSCode ESLint plugin (one time)</h5>

<p>To install ESLint in VSCode, open VSCode, go to the Extensions tab on the right sidebar (the three cubes with the fourth cube offset), search for “ESLint”, and click Install (same procedure as for Prettier).</p>

<p><img src="typescript-conventions-best-practices-images/image7.png" alt="" /></p>

<h5 id="nodejs-runtime-one-time">Node.js runtime (one time)</h5>

<p>Download the latest Node.js LTS package from <a href="https://nodejs.org/en/">https://nodejs.org/en/</a> (current version is v22.11.0) and install. Use all the default installation options (don’t enable or disable any options).</p>

<h5 id="typescript-eslint-command-line-tools-every-world">Typescript-eslint command line tools (every world)</h5>

<p>Open a Terminal prompt (e.g. run ‘cmd’ from the system search bar), change directory to the <code class="language-plaintext highlighter-rouge">scripts</code> directory of your world you obtained above, e.g.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>C:<span class="se">\\</span>Users<span class="se">\\</span>live<span class="se">\\</span>AppData<span class="se">\\</span>LocalLow<span class="se">\\</span>Meta<span class="se">\\</span>Horizon Worlds<span class="se">\\</span>eslint test_10160832935606146<span class="se">\\</span>scripts
</code></pre></div></div>

<p>and run:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="se">\-</span><span class="nt">-no-save</span> eslint@^8.56.0 @eslint/js typescript@4.7.4 typescript-eslint@^7.18.0 eslint-config-prettier
</code></pre></div></div>

<p>(Note: if you are using the yarn or pnpm package managers, see instructions <a href="https://typescript-eslint.io/getting-started/">here</a>).</p>

<p>(Note: we need to pin to older versions of eslint and typescript-eslint because horizon worlds is running such an old version of typescript).</p>

<p>(Note: due to current shortcomings of the desktop editor, you must run <code class="language-plaintext highlighter-rouge">npm install</code> after each time you open the desktop editor on the world, as the desktop editor will clobber the previous installation of eslint).</p>

<p>As above, you <strong>must</strong> install locally to the <code class="language-plaintext highlighter-rouge">scripts</code> directory for <em>each</em> world you want to use typescript-eslint. <a href="https://typescript-eslint.io/troubleshooting/faqs/typescript#should-typescript-be-installed-globally-or-locally">It cannot be installed ‘globally’</a>.</p>

<h5 id="eslint-configuration-file-every-world">ESLint configuration file (every world)</h5>

<p>Create a <code class="language-plaintext highlighter-rouge">eslint.config.mjs</code> file in your world’s scripts directory. Be sure to exclude the <code class="language-plaintext highlighter-rouge">types/*.d.ts</code> files, as the code there is not well formatted and will cause <em>lots</em> of error messages, and the <code class="language-plaintext highlighter-rouge">.backups</code> directory that contains old deleted code.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">eslint</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@eslint/js</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">tseslint</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typescript-eslint</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">eslintConfigPrettier</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">eslint-config-prettier</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">tseslint</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span>
  <span class="nx">eslint</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommended</span><span class="p">,</span>
  <span class="c1">// @ts-ignore</span>
  <span class="nx">tseslint</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommended</span><span class="p">,</span>
  <span class="nx">eslintConfigPrettier</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">ignores</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">'</span><span class="s1">types/*.d.ts</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">.backups/**</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">]</span>
  <span class="p">},</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="installation-test-every-world-tho-can-skip-once-you-have-the-process-sorted-out">Installation Test (every world… tho can skip once you have the process sorted out)</h5>

<p>Create a file in your <code class="language-plaintext highlighter-rouge">scripts</code> directory (e.g. <code class="language-plaintext highlighter-rouge">ESLintTest.ts</code>) with valid typescript, but an obviously inadvisable language construct, such as the following variable declaration that uses the any type.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">foo</span><span class="p">:</span> <span class="kr">any</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre></div></div>

<p>Test that you are able to run eslint from the command line from your scripts directory, and that it detects this error</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx eslint <span class="nb">.</span>
</code></pre></div></div>

<p>This command should generate an error message on the above file:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:<span class="se">\\</span>Users<span class="se">\\</span>name<span class="se">\\</span>AppData<span class="se">\\</span>LocalLow<span class="se">\\</span>Meta<span class="se">\\</span>Horizon Worlds<span class="se">\\</span>eslint test_10160832935606146<span class="se">\\</span>scripts<span class="se">\\</span>ESLintTest.ts
 1:19 error Unexpected any. Specify a different <span class="nb">type</span> @typescript<span class="se">\-</span>eslint/no<span class="se">\-</span>explicit<span class="se">\-</span>any
✖ 1 problem <span class="o">(</span>1 error, 0 warnings<span class="o">)</span>
</code></pre></div></div>

<p>Next, open VSCode on your same project, and click the same test file (e.g. <code class="language-plaintext highlighter-rouge">ESLintTest.ts</code>) and verify that the “Problems” tab of the IDE shows the same error message for this file.</p>

<p>If you click on the underlined error message in the Problems listing, a web browser will be launched that explains why what you have written is a bad idea (in this case linking to <a href="https://typescript-eslint.io/rules/no-explicit-any/">@typescirpt-eslint/no-explicit-any</a>).</p>

<p>If you hover over the error in the code and click <code class="language-plaintext highlighter-rouge">Ctrl-.</code> (for Quick Fix), you will see that the first suggestion in the pop-up is to ‘use <code class="language-plaintext highlighter-rouge">unknown</code> instead’, which is a much better option than any.</p>

<h4 id="configuration-1">Configuration</h4>

<p>The installation configuration above installs the <a href="https://eslint.org/docs/latest/use/configure/configuration-files#using-predefined-configurations">‘recommended’</a> javascript rules, <a href="https://typescript-eslint.io/users/configs#recommended">‘recommended’</a> typescript rules, and disables any formatting rules in ESLint that replicate or would <a href="https://github.com/prettier/eslint-config-prettier?tab=readme-ov-file#eslint-config-prettier">interfere with the Prettier</a> plugin. However, there are _lots_ of deeper configuration options you might want to consider, and a number of additional <a href="https://typescript-eslint.io/users/configs">‘shared configs’</a> that you can use, such as:</p>

<ul>
  <li>
    <p><a href="https://typescript-eslint.io/users/configs#recommended-type-checked">recommendedTypeChecked</a></p>

    <ul>
      <li>
        <p>Uses the power of the typescript typing engine to do even deeper checks on your code usage</p>
      </li>
      <li>
        <p>Requires a minor amount of <a href="#extra-configuration-for-eslint-recommendedtypechecked">extra configuration</a></p>
      </li>
    </ul>
  </li>
  <li>
    <p><a href="https://typescript-eslint.io/users/configs#strict">strict</a></p>

    <ul>
      <li>
        <p>Includes everything in ‘recommended’, plus somewhat more ‘opinionated’ rules that may not be applicable to all codebases</p>
      </li>
      <li>
        <p>Also comes in a <a href="https://typescript-eslint.io/users/configs#strict-type-checked">strictTypeChecked</a> variant with extra typing checks</p>
      </li>
    </ul>
  </li>
  <li>
    <p><a href="https://typescript-eslint.io/users/configs#stylistic">stylistic</a></p>

    <ul>
      <li>
        <p>Additional opinionated stylistic rules that don’t impact program logic to be used alongside either ‘recommended’ or ‘strict’</p>
      </li>
      <li>
        <p>Also comes in a <a href="https://typescript-eslint.io/users/configs#stylistic-type-checked">stylisticTypeChecked</a> variant with extra typing checks</p>
      </li>
    </ul>
  </li>
</ul>

<p>The full list of <strong>all</strong> supported rules can be found here:</p>

<ul>
  <li>
    <p><a href="https://eslint.org/docs/latest/rules/">ESLint</a> rules reference</p>
  </li>
  <li>
    <p>t<a href="https://typescript-eslint.io/rules/">ypescript-eslint</a> rules reference</p>
  </li>
</ul>

<p>The ESLint plugin to VSCode also has configuration options as well. By default, the linter runs as you type, which is usually the best option, as you want to know as soon as possible when there is a coding problem. But, you can change that to only run on save, if you so desire.</p>

<h4 id="usage-1">Usage</h4>

<p>If you find that some linter error is incorrect or too aggressive for your code, you can insert a comment above the line causing the problem to tell the linter to ignore it. The Quick Fix in VSCode can help you format these comments, but they are generally of the form:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* eslint-disable-disable-next-line &lt;rule-name-here&gt; */</span>
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">&lt;rule-name-here&gt;</code> is the name of the eslint rule that is reporting an error. You can disable eslint errors or the entire file using the following comment at the top of the file.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* eslint-disable &lt;rule-name-here&gt; */</span>
</code></pre></div></div>

<p>You really should endeavor never to disable the alerts, and instead fix your code so that it compiles with no warnings or errors.</p>

<h2 id="spelling">Spelling</h2>

<p>When there are misspelled words in your code, it does not only cause confusion for others reading your code and trying to understand what you were trying to accomplish. Sometimes, there are certain coding errors that can’t be caught by linters that can be caught simply by matching spelling with <em>well designed</em> API definitions (i.e. ones that follow good spelling rules as well).</p>

<h3 id="code-spell-checker">Code Spell Checker</h3>

<p>This popular plugin checks your code and comments for spelling mistakes. It is easy to add new words to a personal dictionary should you have some particular jargon that doesn’t appear in the standard dictionary.</p>

<h4 id="installation-2">Installation</h4>

<p>To install Code Spell Checker in VSCode, simply open VSCode, go to the Extensions tab on the right sidebar (the three cubes with the fourth cube offset), search for “spell check”, click on “Code Spell Check”, and click Install.</p>

<p><img src="typescript-conventions-best-practices-images/image8.png" alt="" /></p>

<h4 id="configuration-2">Configuration</h4>

<p>There is not a lot of additional configuration need, but there are a few additional options if you check the plugin settings page. It will highlight spelling errors in your code as ‘warnings’ of ‘Unknown words’in the ‘Problems’ view of VSCode. You can use ‘Quick Fix’ (<code class="language-plaintext highlighter-rouge">Ctrl-.</code>) to get spelling suggestions, and if you want to add a word permanently to the dictionary, you can select ‘Add Word to User Settings’ (note, don’t add to Workspace Settings, as the Horizon Desktop Editor will overwrite that file and delete them). You can also access the Spelling settings by right clicking in the editor window and selecting the ‘Spelling’ sub-menu.</p>

<h1 id="appendix">Appendix</h1>

<h2 id="extra-configuration-for-eslint-recommendedtypechecked">Extra configuration for ESLint recommendedTypeChecked</h2>

<p>The typescript-eslint documentation explains how to <a href="https://typescript-eslint.io/getting-started/typed-linting">enable type checked linting</a>.In particular, you will need to use a TypeChecked version of one of the shared configs, and you need to configure ESLint to use the typescript parser on the current directory.</p>

<p>Additionally, though it will work without changes, to avoid errors in VSCode, we can’t use <code class="language-plaintext highlighter-rouge">import.meta.path</code>, but must use a legacy Node.js api instead. And we must prevent the typing pass from including the ESLint configuration file, as it is not part of our typescript project.</p>

<p>Change your <code class="language-plaintext highlighter-rouge">eslint.config.mjs</code> to the following:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">dirname</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">node:path</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fileURLToPath</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">node:url</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">eslint</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@eslint/js</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">tseslint</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">typescript-eslint</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">eslintConfigPrettier</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">eslint-config-prettier</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">tseslint</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span>
  <span class="nx">eslint</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommended</span><span class="p">,</span>
  <span class="nx">tseslint</span><span class="p">.</span><span class="nx">configs</span><span class="p">.</span><span class="nx">recommendedTypeChecked</span><span class="p">,</span>
  <span class="nx">eslintConfigPrettier</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">languageOptions</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">parserOptions</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">projectService</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">tsconfigRootDir</span><span class="p">:</span> <span class="nx">dirname</span><span class="p">(</span><span class="nx">fileURLToPath</span><span class="p">(</span><span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">url</span><span class="p">)),</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">ignores</span><span class="p">:</span> <span class="p">[</span>
      <span class="dl">'</span><span class="s1">types/*.d.ts</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">.backups/**</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">eslint.config.mjs</span><span class="dl">'</span>
    <span class="p">]</span>
  <span class="p">},</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="other-typescript-coding-conventions">Other Typescript Coding Conventions</h2>

<ul>
  <li>
    <p>Google<br />
Very extensive with lots of good examples<br />
<a href="https://google.github.io/styleguide/tsguide.html">https://google.github.io/styleguide/tsguide.html</a></p>
  </li>
  <li>
    <p>TS.dev<br />
More or less the same as the google conventions but in an easier to navigate format.<br />
<a href="https://ts.dev/style/">https://ts.dev/style/</a></p>
  </li>
  <li>
    <p>Typescriptlang.org<br />
The official website for the typescript language. Limited advice, and mainly for some more advanced features.<br />
<a href="https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html">https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html</a></p>
  </li>
  <li>
    <p>Microsoft<br />
For the <em>contributors</em> to the typescript codebase. They take pains to say ‘these are not official’.<br />
<a href="https://github.com/microsoft/TypeScript/wiki/Coding-guidelines">https://github.com/microsoft/TypeScript/wiki/Coding-guidelines</a></p>
  </li>
  <li>
    <p>Angular<br />
An opinionated set of conventions targeting angular developers. Some good ideas, but some parts not applicable to Horizon Worlds<br />
<a href="https://angular.dev/style-guide">https://angular.dev/style-guide</a></p>
  </li>
  <li>
    <p>Mkosir<br />
Another thoughtful set of conventions<br />
<a href="https://mkosir.github.io/typescript-style-guide/">https://mkosir.github.io/typescript-style-guide/</a></p>
  </li>
  <li>
    <p>Basarat<br />
Yet another take on conventions for typescript<br />
<a href="https://basarat.gitbook.io/typescript/styleguide">https://basarat.gitbook.io/typescript/styleguide</a></p>
  </li>
  <li>
    <p>AWS<br />
Amazon’s advice for typescript best practices<br />
<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/best-practices-cdk-typescript-iac/typescript-best-practices.html">https://docs.aws.amazon.com/prescriptive-guidance/latest/best-practices-cdk-typescript-iac/typescript-best-practices.html</a></p>
  </li>
</ul>

  
  <!-- Navigation buttons -->
  <div class="nav-buttons">
    <button id="prev-btn">← Previous</button>
    <button id="next-btn">Next →</button>
  </div>
</article>

<script>
// Add navigation and TOC functionality for individual doc pages
document.addEventListener('DOMContentLoaded', function() {
  // Generate all docs data from Jekyll collections
  const allDocs = [
    
    
      {
        title: "Building your first world",
        url: "/ben-worlds-documentation/docs/creating-a-world/building-your-first-world/",
        category: "creating-a-world",
        order: 1
      },
    
      {
        title: "Create a clean game HUD for Worlds",
        url: "/ben-worlds-documentation/docs/creating-a-world/create-a-clean-game-HUD-for-Worlds/",
        category: "creating-a-world",
        order: 3
      },
    
      {
        title: "Create a versatile holster system in Worlds",
        url: "/ben-worlds-documentation/docs/creating-a-world/create-a-versatile-holster-system-in-Worlds/",
        category: "creating-a-world",
        order: 4
      },
    
      {
        title: "Inventory systems - unlock the power of player inventories",
        url: "/ben-worlds-documentation/docs/creating-a-world/inventory-systems-unlock-the-power-of-player-inventories/",
        category: "creating-a-world",
        order: 5
      },
    
      {
        title: "Mobile worlds crash course",
        url: "/ben-worlds-documentation/docs/creating-a-world/mobile-worlds-crash-course/",
        category: "creating-a-world",
        order: 6
      },
    
      {
        title: "Worlds tools overview",
        url: "/ben-worlds-documentation/docs/creating-a-world/worlds-tools-overview/",
        category: "creating-a-world",
        order: 2
      },
    
      {
        title: "Code faster with Copilot in the Worlds desktop editor &amp; VSCode",
        url: "/ben-worlds-documentation/docs/generative-ai-tools/code-faster-with-copilot-in-the-Worlds-desktop-editor-&-VSCode/",
        category: "generative-ai-tools",
        order: 3
      },
    
      {
        title: "Hands-on with GenAI toolkit for Worlds - full feature tour",
        url: "/ben-worlds-documentation/docs/generative-ai-tools/hands-on-with-GenAI-toolkit-for-Worlds-full-feature-tour/",
        category: "generative-ai-tools",
        order: 1
      },
    
      {
        title: "Build a player-guided lobby with mesh gen",
        url: "/ben-worlds-documentation/docs/generative-ai-tools/build-a-player-guided-lobby-with-mesh-gen/",
        category: "generative-ai-tools",
        order: 2
      },
    
      {
        title: "15 Worlds TypeScript API 2.0 tips and tricks",
        url: "/ben-worlds-documentation/docs/getting-started-with-scripting/15-Worlds-TypeScript-API-2.0-tips-and-tricks/",
        category: "getting-started-with-scripting",
        order: 2
      },
    
      {
        title: "PlayerControls API &amp; focused interaction in Worlds",
        url: "/ben-worlds-documentation/docs/getting-started-with-scripting/PlayerControls-API-&-focused-interaction-in-Worlds/",
        category: "getting-started-with-scripting",
        order: 4
      },
    
      {
        title: "TypeScript basics: beginner-friendly session for Worlds",
        url: "/ben-worlds-documentation/docs/getting-started-with-scripting/TypeScript-basics-beginner-friendly-session-for-Worlds/",
        category: "getting-started-with-scripting",
        order: 1
      },
    
      {
        title: "CodeBlocks to TypeScript",
        url: "/ben-worlds-documentation/docs/getting-started-with-scripting/codeblocks-to-TypeScript/",
        category: "getting-started-with-scripting",
        order: 3
      },
    
      {
        title: "Get started",
        url: "/ben-worlds-documentation/docs/manuals-and-cheat-sheets/get-started/",
        category: "manuals-and-cheat-sheets",
        order: 1
      },
    
      {
        title: "15 blender tips for Horizon assets",
        url: "/ben-worlds-documentation/docs/meshes-materials-import/15-blender-tips-for-Horizon-assets/",
        category: "meshes-materials-import",
        order: 1
      },
    
      {
        title: "TypeScript Conventions and Best Practices for Horizon Worlds",
        url: "/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/",
        category: "scripting-concepts-persistence-apis",
        order: 1
      },
    
      {
        title: "Interactive laser pen for mobile worlds: build-along",
        url: "/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/interactive-laser-pen-for-mobile-worlds-build-along/",
        category: "scripting-concepts-persistence-apis",
        order: 2
      },
    
      {
        title: "Worlds desktop editor 101",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-editor-101/",
        category: "understanding-the-desktop-editor",
        order: 1
      },
    
      {
        title: "Worlds desktop tools basics",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-tools-basics/",
        category: "understanding-the-desktop-editor",
        order: 2
      },
    
      {
        title: "Asset spawning &amp; world streaming",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/asset-spawning-&-world-streaming/",
        category: "understanding-the-desktop-editor",
        order: 6
      },
    
      {
        title: "Boost performance - top 7 spawning &amp; streaming tricks",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/boost-performance-top-7-spawning-&-streaming-tricks/",
        category: "understanding-the-desktop-editor",
        order: 3
      },
    
      {
        title: "Collaboratively build with shared asset templates",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/collaboratively-build-with-shared-asset-templates/",
        category: "understanding-the-desktop-editor",
        order: 4
      },
    
      {
        title: "Improve frame rates and custom asset bloat",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/improve-frame-rates-and-custom-asset-bloat/",
        category: "understanding-the-desktop-editor",
        order: 5
      },
    
      {
        title: "Trace, fix, &amp; optimize world performance issues",
        url: "/ben-worlds-documentation/docs/understanding-the-desktop-editor/trace,-fix,-&-optimize-world-performance-issues/",
        category: "understanding-the-desktop-editor",
        order: 7
      }
    
  ];
  
  // Sort docs by category, then by order
  allDocs.sort((a, b) => {
    if (a.category !== b.category) {
      return a.category.localeCompare(b.category);
    }
    return a.order - b.order;
  });
  
  // Find current doc index
  const currentUrl = window.location.pathname;
  const currentIndex = allDocs.findIndex(doc => doc.url === currentUrl);
  
  // Update navigation buttons
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');
  
  if (prevBtn && nextBtn) {
    if (currentIndex > 0) {
      prevBtn.disabled = false;
      prevBtn.onclick = () => {
        window.location.href = allDocs[currentIndex - 1].url;
      };
    } else {
      prevBtn.disabled = true;
    }
    
    if (currentIndex < allDocs.length - 1 && currentIndex !== -1) {
      nextBtn.disabled = false;
      nextBtn.onclick = () => {
        window.location.href = allDocs[currentIndex + 1].url;
      };
    } else {
      nextBtn.disabled = true;
    }
  }
  
  // Generate TOC for this page
  const headers = document.querySelectorAll('h2, h3, h4');
  if (headers.length > 0) {
    const toc = document.createElement('nav');
    toc.className = 'doc-toc';
    toc.innerHTML = '<h3>Table of Contents</h3><ul></ul>';
    
    headers.forEach(header => {
      if (!header.id) {
        header.id = header.textContent.trim().toLowerCase().replace(/\s+/g, '-');
      }
      
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = `#${header.id}`;
      a.textContent = header.textContent;
      a.className = `level-${header.tagName.toLowerCase()}`;
      
      li.appendChild(a);
      toc.querySelector('ul').appendChild(li);
    });
    
    // Insert TOC after first paragraph or at beginning
    const firstP = document.querySelector('article p');
    if (firstP) {
      firstP.parentNode.insertBefore(toc, firstP.nextSibling);
    } else {
      document.querySelector('article').appendChild(toc);
    }
  }
});
</script>


<!-- Jekyll data for docs navigation -->

<script>
// Auto-generated from Jekyll collections - this gives us real URLs!
window.docsData = {
  
  
    
    "creating-a-world": [
      
      
        {
          "title": "Building your first world",
          "url": "/ben-worlds-documentation/docs/creating-a-world/building-your-first-world/",
          "path": "_docs/creating-a-world/building-your-first-world.md",
          "description": "Your journey as a creator in Meta Horizon Worlds starts here",
          "order": 1
        },
      
        {
          "title": "Worlds tools overview",
          "url": "/ben-worlds-documentation/docs/creating-a-world/worlds-tools-overview/",
          "path": "_docs/creating-a-world/worlds-tools-overview.md",
          "description": "Advanced tools for smart NPCs, huge maps, and custom camera angles",
          "order": 2
        },
      
        {
          "title": "Create a clean game HUD for Worlds",
          "url": "/ben-worlds-documentation/docs/creating-a-world/create-a-clean-game-HUD-for-Worlds/",
          "path": "_docs/creating-a-world/create-a-clean-game-HUD-for-Worlds.md",
          "description": "Learn what it takes to build a great mobile Heads-Up Display (HUD)",
          "order": 3
        },
      
        {
          "title": "Create a versatile holster system in Worlds",
          "url": "/ben-worlds-documentation/docs/creating-a-world/create-a-versatile-holster-system-in-Worlds/",
          "path": "_docs/creating-a-world/create-a-versatile-holster-system-in-Worlds.md",
          "description": "Give your players a powerful and intuitive way to manage their items",
          "order": 4
        },
      
        {
          "title": "Inventory systems - unlock the power of player inventories",
          "url": "/ben-worlds-documentation/docs/creating-a-world/inventory-systems-unlock-the-power-of-player-inventories/",
          "path": "_docs/creating-a-world/inventory-systems-unlock-the-power-of-player-inventories.md",
          "description": "Give your players a persistent and rewarding experience with built-in inventory system",
          "order": 5
        },
      
        {
          "title": "Mobile worlds crash course",
          "url": "/ben-worlds-documentation/docs/creating-a-world/mobile-worlds-crash-course/",
          "path": "_docs/creating-a-world/mobile-worlds-crash-course.md",
          "description": "Design &amp; UI basics for creating optimized, cross-platform mobile experiences",
          "order": 6
        }
      
    ],
  
    
    "generative-ai-tools": [
      
      
        {
          "title": "Hands-on with GenAI toolkit for Worlds - full feature tour",
          "url": "/ben-worlds-documentation/docs/generative-ai-tools/hands-on-with-GenAI-toolkit-for-Worlds-full-feature-tour/",
          "path": "_docs/generative-ai-tools/hands-on-with-GenAI-toolkit-for-Worlds-full-feature-tour.md",
          "description": "Complete tour of the entire Worlds GenAI creative suite",
          "order": 1
        },
      
        {
          "title": "Build a player-guided lobby with mesh gen",
          "url": "/ben-worlds-documentation/docs/generative-ai-tools/build-a-player-guided-lobby-with-mesh-gen/",
          "path": "_docs/generative-ai-tools/build-a-player-guided-lobby-with-mesh-gen.md",
          "description": "Watch a complete scene come to life from scratch in this collaborative mesh generation workshop",
          "order": 2
        },
      
        {
          "title": "Code faster with Copilot in the Worlds desktop editor &amp; VSCode",
          "url": "/ben-worlds-documentation/docs/generative-ai-tools/code-faster-with-copilot-in-the-Worlds-desktop-editor-&-VSCode/",
          "path": "_docs/generative-ai-tools/code-faster-with-copilot-in-the-Worlds-desktop-editor-&-VSCode.md",
          "description": "Unlock a more efficient scripting workflow by integrating GitHub Copilot",
          "order": 3
        }
      
    ],
  
    
    "getting-started-with-scripting": [
      
      
        {
          "title": "TypeScript basics: beginner-friendly session for Worlds",
          "url": "/ben-worlds-documentation/docs/getting-started-with-scripting/TypeScript-basics-beginner-friendly-session-for-Worlds/",
          "path": "_docs/getting-started-with-scripting/TypeScript-basics-beginner-friendly-session-for-Worlds.md",
          "description": "Take your first steps into the powerful world of TypeScript scripting",
          "order": 1
        },
      
        {
          "title": "15 Worlds TypeScript API 2.0 tips and tricks",
          "url": "/ben-worlds-documentation/docs/getting-started-with-scripting/15-Worlds-TypeScript-API-2.0-tips-and-tricks/",
          "path": "_docs/getting-started-with-scripting/15-Worlds-TypeScript-API-2.0-tips-and-tricks.md",
          "description": "Level up your scripting skills and master the best practices for TypeScript 2.0",
          "order": 2
        },
      
        {
          "title": "CodeBlocks to TypeScript",
          "url": "/ben-worlds-documentation/docs/getting-started-with-scripting/codeblocks-to-TypeScript/",
          "path": "_docs/getting-started-with-scripting/codeblocks-to-TypeScript.md",
          "description": "A guide for Meta Horizon Worlds creators transitioning from CodeBlocks to TypeScript",
          "order": 3
        },
      
        {
          "title": "PlayerControls API &amp; focused interaction in Worlds",
          "url": "/ben-worlds-documentation/docs/getting-started-with-scripting/PlayerControls-API-&-focused-interaction-in-Worlds/",
          "path": "_docs/getting-started-with-scripting/PlayerControls-API-&-focused-interaction-in-Worlds.md",
          "description": "Create a seamless and intuitive control scheme for VR, desktop, and mobile players",
          "order": 4
        }
      
    ],
  
    
    "manuals-and-cheat-sheets": [
      
      
        {
          "title": "Get started",
          "url": "/ben-worlds-documentation/docs/manuals-and-cheat-sheets/get-started/",
          "path": "_docs/manuals-and-cheat-sheets/get-started.md",
          "description": "Welcome to the MHCP Creator GitHub Repository - your hub for all creator and mentor made documentation",
          "order": 1
        }
      
    ],
  
    
    "meshes-materials-import": [
      
      
        {
          "title": "15 blender tips for Horizon assets",
          "url": "/ben-worlds-documentation/docs/meshes-materials-import/15-blender-tips-for-Horizon-assets/",
          "path": "_docs/meshes-materials-import/15-blender-tips-for-Horizon-assets.md",
          "description": "Go beyond basic shapes and learn the pro workflow for creating stylized, game-ready 3D assets",
          "order": 1
        }
      
    ],
  
    
    "scripting-concepts-persistence-apis": [
      
      
        {
          "title": "TypeScript Conventions and Best Practices for Horizon Worlds",
          "url": "/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices/",
          "path": "_docs/scripting-concepts-persistence-apis/typescript-conventions-best-practices.md",
          "description": "Comprehensive guide to TypeScript conventions and best practices",
          "order": 1
        },
      
        {
          "title": "Interactive laser pen for mobile worlds: build-along",
          "url": "/ben-worlds-documentation/docs/scripting-concepts-persistence-apis/interactive-laser-pen-for-mobile-worlds-build-along/",
          "path": "_docs/scripting-concepts-persistence-apis/interactive-laser-pen-for-mobile-worlds-build-along.md",
          "description": "Build a versatile, interactive laser pen that allows players to draw and point on any surface",
          "order": 2
        }
      
    ],
  
    
    "understanding-the-desktop-editor": [
      
      
        {
          "title": "Worlds desktop editor 101",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-editor-101/",
          "path": "_docs/understanding-the-desktop-editor/Worlds-desktop-editor-101.md",
          "description": "Build with confidence by mastering the essentials of the Meta Horizon Worlds Desktop Editor",
          "order": 1
        },
      
        {
          "title": "Worlds desktop tools basics",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/Worlds-desktop-tools-basics/",
          "path": "_docs/understanding-the-desktop-editor/Worlds-desktop-tools-basics.md",
          "description": "Build richer, more interactive experiences by mastering the desktop editor",
          "order": 2
        },
      
        {
          "title": "Boost performance - top 7 spawning &amp; streaming tricks",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/boost-performance-top-7-spawning-&-streaming-tricks/",
          "path": "_docs/understanding-the-desktop-editor/boost-performance-top-7-spawning-&-streaming-tricks.md",
          "description": "Master the essential techniques to optimize your world&#39;s performance through smart spawning and streaming",
          "order": 3
        },
      
        {
          "title": "Collaboratively build with shared asset templates",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/collaboratively-build-with-shared-asset-templates/",
          "path": "_docs/understanding-the-desktop-editor/collaboratively-build-with-shared-asset-templates.md",
          "description": "Learn how to use Shared Asset Templates to build in parallel and streamline your team&#39;s entire workflow",
          "order": 4
        },
      
        {
          "title": "Improve frame rates and custom asset bloat",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/improve-frame-rates-and-custom-asset-bloat/",
          "path": "_docs/understanding-the-desktop-editor/improve-frame-rates-and-custom-asset-bloat.md",
          "description": "Stop guessing what&#39;s causing lag, black screens, and asset bloat, and start diagnosing the root cause",
          "order": 5
        },
      
        {
          "title": "Asset spawning &amp; world streaming",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/asset-spawning-&-world-streaming/",
          "path": "_docs/understanding-the-desktop-editor/asset-spawning-&-world-streaming.md",
          "description": "Learn the fundamentals of asset spawning and world streaming for optimal performance",
          "order": 6
        },
      
        {
          "title": "Trace, fix, &amp; optimize world performance issues",
          "url": "/ben-worlds-documentation/docs/understanding-the-desktop-editor/trace,-fix,-&-optimize-world-performance-issues/",
          "path": "_docs/understanding-the-desktop-editor/trace,-fix,-&-optimize-world-performance-issues.md",
          "description": "Complete guide to diagnosing and fixing performance issues in your Horizon Worlds",
          "order": 7
        }
      
    ]
  
};

// Convert to format that existing navigation code expects
window.docs = {};
for (const [category, items] of Object.entries(window.docsData)) {
  window.docs[category] = items.map(item => item.path.split('/').pop());
}

// Store URL mapping for Jekyll URLs
window.docsUrls = {};
for (const [category, items] of Object.entries(window.docsData)) {
  for (const item of items) {
    const filename = item.path.split('/').pop();
    window.docsUrls[`docs/${category}/${filename}`] = item.url;
  }
}
</script>
</div>
    </div>
  </main>

  <aside class="right-sidebar">
    <h3>On this page</h3>
    <ul id="doc-toc"></ul>
  </aside>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
  <div class="footer-links">
    <p>Built by MHCP Creators • 
      <a href="https://github.com/MHCPCreators/worlds-documentation">GitHub</a> • 
      <a href="https://communityforums.atmeta.com/t5/Creator-Forum/ct-p/Meta_Horizon_Creator_Forums">Forums</a> •
    </p>
    <a href="https://www.youtube.com/@metahorizoncreatorprogram" target="_blank" aria-label="Creator Programs YouTube Channel">
      <i class="fab fa-youtube"></i>
    </a>
  </div>
  </footer>

<script>
// Basic functionality for Jekyll-based docs
document.addEventListener('DOMContentLoaded', function() {
  // Mobile sidebar toggle
  const sidebar = document.querySelector(".sidebar");
  const backdrop = document.getElementById("sidebar-backdrop");
  const body = document.body;
  
  document.getElementById("menu-toggle").addEventListener("click", () => {
    const isOpen = sidebar.classList.toggle("open");
    backdrop.classList.toggle("show", isOpen);
    body.classList.toggle("sidebar-open", isOpen);
  });
  
  backdrop.addEventListener("click", () => {
    sidebar.classList.remove("open");
    backdrop.classList.remove("show");
    body.classList.remove("sidebar-open");
  });
  
  document.getElementById("sidebar-close").addEventListener("click", () => {
    sidebar.classList.remove("open");
    backdrop.classList.remove("show");
    body.classList.remove("sidebar-open");
  });
  
  // Theme toggle
  const toggleBtn = document.getElementById("theme-toggle");
  if (toggleBtn) {
    toggleBtn.addEventListener("click", () => {
      const current = document.body.getAttribute("data-theme");
      const next = current === "dark" ? "light" : "dark";
      document.body.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
      toggleBtn.textContent = next === "dark" ? "🌙" : "☀️";
    });
  }
  
  // Apply saved theme
  const savedTheme = localStorage.getItem("theme") || "dark";
  document.body.setAttribute("data-theme", savedTheme);
  if (toggleBtn) {
    toggleBtn.textContent = savedTheme === "dark" ? "🌙" : "☀️";
  }
  
  // Folder toggle functionality
  document.querySelectorAll('.folder-toggle').forEach(toggle => {
    toggle.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      
      const dropdown = toggle.nextElementSibling;
      const chevron = toggle.querySelector('.chevron-icon');
      
      if (dropdown && dropdown.classList.contains('dropdown')) {
        const isOpen = dropdown.classList.toggle('open');
        toggle.classList.toggle('open', isOpen);
        
        // Rotate chevron
        if (chevron) {
          chevron.style.transform = isOpen ? 'rotate(90deg)' : 'rotate(0deg)';
        }
      }
    });
  });
  
  // Generate table of contents for individual pages
  const headers = document.querySelectorAll('#doc-content h2, #doc-content h3');
  const tocList = document.getElementById('doc-toc');
  const rightSidebar = document.querySelector('.right-sidebar');
  
  if (headers.length === 0) {
    if (rightSidebar) rightSidebar.style.display = 'none';
  } else {
    if (rightSidebar) rightSidebar.style.display = 'block';
    
    headers.forEach(header => {
      if (!header.id) {
        header.id = header.textContent.trim().toLowerCase().replace(/\s+/g, '-');
      }
      
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = `#${header.id}`;
      a.textContent = header.textContent;
      
      a.addEventListener('click', (e) => {
        e.preventDefault();
        header.scrollIntoView({ behavior: 'smooth' });
        history.replaceState(null, '', `#${header.id}`);
      });
      
      li.appendChild(a);
      if (tocList) tocList.appendChild(li);
    });
  }
});
</script>

</body>
</html>
